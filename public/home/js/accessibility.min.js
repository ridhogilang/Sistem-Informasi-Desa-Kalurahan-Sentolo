!function (e) { "object" == typeof module && module.exports ? module.exports = e.default = e : "function" == typeof define && define.amd ? define("highcharts/modules/accessibility", ["highcharts"], function (t) { return e(t), e.Highcharts = t, e }) : e("undefined" != typeof Highcharts ? Highcharts : void 0) }(function (t) { function e(t, e, i, n) { t.hasOwnProperty(e) || (t[e] = n.apply(null, i)) } e(t = t ? t._modules : {}, "Accessibility/Utils/HTMLUtilities.js", [t["Core/Utilities.js"], t["Core/Globals.js"]], function (t, e) { function o(t) { return t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;") } var i = t.merge, n = e.win, r = n.document; return { addClass: function (t, e) { t.classList ? t.classList.add(e) : t.className.indexOf(e) < 0 && (t.className += e) }, escapeStringForHTML: o, getElement: function (t) { return r.getElementById(t) }, getFakeMouseEvent: function (t) { if ("function" == typeof n.MouseEvent) return new n.MouseEvent(t); if (r.createEvent) { var e = r.createEvent("MouseEvent"); if (e.initMouseEvent) return e.initMouseEvent(t, !0, !0, n, "click" === t ? 1 : 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), e } return { type: t } }, removeElement: function (t) { t && t.parentNode && t.parentNode.removeChild(t) }, reverseChildNodes: function (t) { for (var e = t.childNodes.length; e--;)t.appendChild(t.childNodes[e]) }, setElAttrs: function (i, n) { Object.keys(n).forEach(function (t) { var e = n[t]; null === e ? i.removeAttribute(t) : (e = o("" + e), i.setAttribute(t, e)) }) }, stripHTMLTagsFromString: function (t) { return "string" == typeof t ? t.replace(/<\/?[^>]+(>|$)/g, "") : t }, visuallyHideElement: function (t) { i(!0, t.style, { position: "absolute", width: "1px", height: "1px", overflow: "hidden", whiteSpace: "nowrap", clip: "rect(1px, 1px, 1px, 1px)", marginTop: "-3px", "-ms-filter": "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)", filter: "alpha(opacity=1)", opacity: "0.01" }) } } }), e(t, "Accessibility/Utils/ChartUtilities.js", [t["Accessibility/Utils/HTMLUtilities.js"], t["Core/Utilities.js"]], function (t, e) { function i(t) { if (t.points && t.points.length && t.points[0].graphic) return t.points[0].graphic.element } function n(t) { var e = i(t); return e && e.parentNode || t.graph && t.graph.element || t.group && t.group.element } var o = t.stripHTMLTagsFromString, s = e.defined, r = e.find, a = e.fireEvent; return { getChartTitle: function (t) { return o(t.options.title.text || t.langFormat("accessibility.defaultChartTitle", { chart: t })) }, getAxisDescription: function (t) { return o(t && (t.userOptions && t.userOptions.accessibility && t.userOptions.accessibility.description || t.axisTitle && t.axisTitle.textStr || t.options.id || t.categories && "categories" || t.dateTime && "Time" || "values")) }, getPointFromXY: function (t, e, i) { for (var n, o = t.length; o--;)if (n = r(t[o].points || [], function (t) { return t.x === e && t.y === i })) return n }, getSeriesFirstPointElement: i, getSeriesFromName: function (t, e) { return e ? (t.series || []).filter(function (t) { return t.name === e }) : t.series }, getSeriesA11yElement: n, unhideChartElementFromAT: function t(e, i) { i.setAttribute("aria-hidden", !1), i !== e.renderTo && i.parentNode && (Array.prototype.forEach.call(i.parentNode.childNodes, function (t) { t.hasAttribute("aria-hidden") || t.setAttribute("aria-hidden", !0) }), t(e, i.parentNode)) }, hideSeriesFromAT: function (t) { (t = n(t)) && t.setAttribute("aria-hidden", !0) }, scrollToPoint: function (t) { var e, i, n = t.series.xAxis, o = t.series.yAxis, r = null != n && n.scrollbar ? n : o; (n = null == r ? void 0 : r.scrollbar) && s(n.to) && s(n.from) && (o = n.to - n.from, t = s(r.dataMin) && s(r.dataMax) ? (e = r.toPixels(r.dataMin), i = r.toPixels(r.dataMax), (r.toPixels(t["xAxis" === r.coll ? "x" : "y"] || 0) - e) / (i - e)) : 0, n.updatePosition(t - o / 2, t + o / 2), a(n, "changed", { from: n.from, to: n.to, trigger: "scrollbar", DOMEvent: null })) } } }), e(t, "Accessibility/KeyboardNavigationHandler.js", [t["Core/Utilities.js"]], function (t) { function e(t, e) { this.chart = t, this.keyCodeMap = e.keyCodeMap || [], this.validate = e.validate, this.init = e.init, this.terminate = e.terminate, this.response = { success: 1, prev: 2, next: 3, noHandler: 4, fail: 5 } } var o = t.find; return e.prototype = { run: function (t) { var e = t.which || t.keyCode, i = this.response.noHandler, n = o(this.keyCodeMap, function (t) { return -1 < t[0].indexOf(e) }); return n ? i = n[1].call(this, e, t) : 9 === e && (i = this.response[t.shiftKey ? "prev" : "next"]), i } }, e }), e(t, "Accessibility/Utils/EventProvider.js", [t["Core/Globals.js"], t["Core/Utilities.js"]], function (e, t) { function i() { this.eventRemovers = [] } var n = t.addEvent; return (t = t.extend)(i.prototype, { addEvent: function () { var t = n.apply(e, arguments); return this.eventRemovers.push(t), t }, removeAddedEvents: function () { this.eventRemovers.forEach(function (t) { t() }), this.eventRemovers = [] } }), i }), e(t, "Accessibility/Utils/DOMElementProvider.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/Utils/HTMLUtilities.js"]], function (t, e, i) { var n = t.win.document; t = e.extend; var o = i.removeElement; return t((i = function () { this.elements = [] }).prototype, { createElement: function () { var t = n.createElement.apply(n, arguments); return this.elements.push(t), t }, destroyCreatedElements: function () { this.elements.forEach(function (t) { o(t) }), this.elements = [] } }), i }), e(t, "Accessibility/AccessibilityComponent.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/Utils/HTMLUtilities.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/Utils/EventProvider.js"], t["Accessibility/Utils/DOMElementProvider.js"]], function (t, e, i, n, o, r) { function s() { } var a = t.win, c = a.document; t = e.extend; var l = e.fireEvent, u = e.merge, h = i.removeElement, d = i.getFakeMouseEvent, p = n.unhideChartElementFromAT; return t(s.prototype = { initBase: function (t) { this.chart = t, this.eventProvider = new o, this.domElementProvider = new r, this.keyCodes = { left: 37, right: 39, up: 38, down: 40, enter: 13, space: 32, esc: 27, tab: 9 } }, addEvent: function () { return this.eventProvider.addEvent.apply(this.eventProvider, arguments) }, createElement: function () { return this.domElementProvider.createElement.apply(this.domElementProvider, arguments) }, fireEventOnWrappedOrUnwrappedElement: function (t, e) { var i = e.type; c.createEvent && (t.dispatchEvent || t.fireEvent) ? t.dispatchEvent ? t.dispatchEvent(e) : t.fireEvent(i, e) : l(t, i, e) }, fakeClickEvent: function (t) { var e; t && (e = d("click"), this.fireEventOnWrappedOrUnwrappedElement(t, e)) }, addProxyGroup: function (e) { this.createOrUpdateProxyContainer(); var i = this.createElement("div"); return Object.keys(e || {}).forEach(function (t) { null !== e[t] && i.setAttribute(t, e[t]) }), this.chart.a11yProxyContainer.appendChild(i), i }, createOrUpdateProxyContainer: function () { var t = this.chart, e = t.renderer.box; t.a11yProxyContainer = t.a11yProxyContainer || this.createProxyContainerElement(), e.nextSibling !== t.a11yProxyContainer && t.container.insertBefore(t.a11yProxyContainer, e.nextSibling) }, createProxyContainerElement: function () { var t = c.createElement("div"); return t.className = "highcharts-a11y-proxy-container", t }, createProxyButton: function (t, e, i, n, o) { var r = t.element, s = this.createElement("button"), a = u({ "aria-label": r.getAttribute("aria-label") }, i); return Object.keys(a).forEach(function (t) { null !== a[t] && s.setAttribute(t, a[t]) }), s.className = "highcharts-a11y-proxy-button", o && this.addEvent(s, "click", o), this.setProxyButtonStyle(s), this.updateProxyButtonPosition(s, n || t), this.proxyMouseEventsForButton(r, s), e.appendChild(s), a["aria-hidden"] || p(this.chart, s), s }, getElementPosition: function (t) { var e = t.element; return (t = this.chart.renderTo) && e && e.getBoundingClientRect ? (e = e.getBoundingClientRect(), t = t.getBoundingClientRect(), { x: e.left - t.left, y: e.top - t.top, width: e.right - e.left, height: e.bottom - e.top }) : { x: 0, y: 0, width: 1, height: 1 } }, setProxyButtonStyle: function (t) { u(!0, t.style, { "border-width": 0, "background-color": "transparent", cursor: "pointer", outline: "none", opacity: .001, filter: "alpha(opacity=1)", "-ms-filter": "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)", zIndex: 999, overflow: "hidden", padding: 0, margin: 0, display: "block", position: "absolute" }) }, updateProxyButtonPosition: function (t, e) { e = this.getElementPosition(e), u(!0, t.style, { width: (e.width || 1) + "px", height: (e.height || 1) + "px", left: (e.x || 0) + "px", top: (e.y || 0) + "px" }) }, proxyMouseEventsForButton: function (n, e) { var o = this; "click touchstart touchend touchcancel touchmove mouseover mouseenter mouseleave mouseout".split(" ").forEach(function (t) { var i = 0 === t.indexOf("touch"); o.addEvent(e, t, function (t) { var e = i ? o.cloneTouchEvent(t) : o.cloneMouseEvent(t); n && o.fireEventOnWrappedOrUnwrappedElement(n, e), t.stopPropagation(), t.preventDefault() }) }) }, cloneMouseEvent: function (t) { if ("function" == typeof a.MouseEvent) return new a.MouseEvent(t.type, t); if (c.createEvent) { var e = c.createEvent("MouseEvent"); if (e.initMouseEvent) return e.initMouseEvent(t.type, t.bubbles, t.cancelable, t.view || a, t.detail, t.screenX, t.screenY, t.clientX, t.clientY, t.ctrlKey, t.altKey, t.shiftKey, t.metaKey, t.button, t.relatedTarget), e } return d(t.type) }, cloneTouchEvent: function (t) { var e = function (t) { for (var e = [], i = 0; i < t.length; ++i) { var n = t.item(i); n && e.push(n) } return e }; return "function" == typeof a.TouchEvent ? (e = new a.TouchEvent(t.type, { touches: e(t.touches), targetTouches: e(t.targetTouches), changedTouches: e(t.changedTouches), ctrlKey: t.ctrlKey, shiftKey: t.shiftKey, altKey: t.altKey, metaKey: t.metaKey, bubbles: t.bubbles, cancelable: t.cancelable, composed: t.composed, detail: t.detail, view: t.view }), t.defaultPrevented && e.preventDefault()) : ((e = this.cloneMouseEvent(t)).touches = t.touches, e.changedTouches = t.changedTouches, e.targetTouches = t.targetTouches), e }, destroyBase: function () { h(this.chart.a11yProxyContainer), this.domElementProvider.destroyCreatedElements(), this.eventProvider.removeAddedEvents() } }, { init: function () { }, getKeyboardNavigation: function () { }, onChartUpdate: function () { }, onChartRender: function () { }, destroy: function () { } }), s }), e(t, "Accessibility/KeyboardNavigation.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/Utils/HTMLUtilities.js"], t["Accessibility/Utils/EventProvider.js"]], function (e, t, i, o) { function n(t, e) { this.init(t, e) } var r = e.doc, s = e.win, a = t.addEvent, c = t.fireEvent, l = i.getElement; return a(r, "keydown", function (t) { 27 === (t.which || t.keyCode) && e.charts && e.charts.forEach(function (t) { t && t.dismissPopupContent && t.dismissPopupContent() }) }), e.Chart.prototype.dismissPopupContent = function () { var t = this; c(this, "dismissPopupContent", {}, function () { t.tooltip && t.tooltip.hide(0), t.hideExportMenu() }) }, n.prototype = { init: function (t, e) { var i = this, n = this.eventProvider = new o; this.chart = t, this.components = e, this.modules = [], this.currentModuleIx = 0, this.update(), n.addEvent(this.tabindexContainer, "keydown", function (t) { return i.onKeydown(t) }), n.addEvent(this.tabindexContainer, "focus", function (t) { return i.onFocus(t) }), n.addEvent(r, "mouseup", function () { return i.onMouseUp() }), n.addEvent(t.renderTo, "mousedown", function () { i.isClickingChart = !0 }), n.addEvent(t.renderTo, "mouseover", function () { i.pointerIsOverChart = !0 }), n.addEvent(t.renderTo, "mouseout", function () { i.pointerIsOverChart = !1 }), this.modules.length && this.modules[0].init(1) }, update: function (t) { var e = (e = this.chart.options.accessibility) && e.keyboardNavigation, i = this.components; this.updateContainerTabindex(), e && e.enabled && t && t.length ? (this.modules = t.reduce(function (t, e) { return e = i[e].getKeyboardNavigation(), t.concat(e) }, []), this.updateExitAnchor()) : (this.modules = [], this.currentModuleIx = 0, this.removeExitAnchor()) }, onFocus: function (t) { var e, i = this.chart; t = t.relatedTarget && i.container.contains(t.relatedTarget), this.isClickingChart || t || null !== (e = this.modules[0]) && void 0 !== e && e.init(1) }, onMouseUp: function () { var t, e; delete this.isClickingChart, this.keyboardReset || this.pointerIsOverChart || (t = this.chart, (e = this.modules && this.modules[this.currentModuleIx || 0]) && e.terminate && e.terminate(), t.focusElement && t.focusElement.removeFocusBorder(), this.currentModuleIx = 0, this.keyboardReset = !0) }, onKeydown: function (t) { t = t || s.event; var e, i, n = this.modules && this.modules.length && this.modules[this.currentModuleIx]; this.keyboardReset = !1, n && ((i = n.run(t)) === n.response.success ? e = !0 : i === n.response.prev ? e = this.prev() : i === n.response.next && (e = this.next()), e && (t.preventDefault(), t.stopPropagation())) }, prev: function () { return this.move(-1) }, next: function () { return this.move(1) }, move: function (t) { var e = this.modules && this.modules[this.currentModuleIx]; if (e && e.terminate && e.terminate(t), this.chart.focusElement && this.chart.focusElement.removeFocusBorder(), this.currentModuleIx += t, e = this.modules && this.modules[this.currentModuleIx]) { if (e.validate && !e.validate()) return this.move(t); if (e.init) return e.init(t), !0 } return (this.currentModuleIx = 0) < t ? (this.exiting = !0, this.exitAnchor.focus()) : this.tabindexContainer.focus(), !1 }, updateExitAnchor: function () { var t = l("highcharts-end-of-chart-marker-" + this.chart.index); this.removeExitAnchor(), t ? (this.makeElementAnExitAnchor(t), this.exitAnchor = t) : this.createExitAnchor() }, updateContainerTabindex: function () { var t = this.chart.options.accessibility; t = !((t = t && t.keyboardNavigation) && !1 === t.enabled); var e = this.chart, i = e.container; e.renderTo.hasAttribute("tabindex") && (i.removeAttribute("tabindex"), i = e.renderTo); var n = (this.tabindexContainer = i).getAttribute("tabindex"); t && !n ? i.setAttribute("tabindex", "0") : t || e.container.removeAttribute("tabindex") }, makeElementAnExitAnchor: function (t) { var e = this.tabindexContainer.getAttribute("tabindex") || 0; t.setAttribute("class", "highcharts-exit-anchor"), t.setAttribute("tabindex", e), t.setAttribute("aria-hidden", !1), this.addExitAnchorEventsToEl(t) }, createExitAnchor: function () { var t = this.chart, e = this.exitAnchor = r.createElement("div"); t.renderTo.appendChild(e), this.makeElementAnExitAnchor(e) }, removeExitAnchor: function () { this.exitAnchor && this.exitAnchor.parentNode && (this.exitAnchor.parentNode.removeChild(this.exitAnchor), delete this.exitAnchor) }, addExitAnchorEventsToEl: function (t) { var e = this.chart, i = this; this.eventProvider.addEvent(t, "focus", function (t) { (t = t || s.event).relatedTarget && e.container.contains(t.relatedTarget) || i.exiting ? i.exiting = !1 : (i.tabindexContainer.focus(), t.preventDefault(), i.modules && i.modules.length && (i.currentModuleIx = i.modules.length - 1, (t = i.modules[i.currentModuleIx]) && t.validate && !t.validate() ? i.prev() : t && t.init(-1))) }) }, destroy: function () { this.removeExitAnchor(), this.eventProvider.removeAddedEvents(), this.chart.container.removeAttribute("tabindex") } }, n }), e(t, "Accessibility/Components/LegendComponent.js", [t["Core/Globals.js"], t["Core/Legend.js"], t["Core/Utilities.js"], t["Accessibility/AccessibilityComponent.js"], t["Accessibility/KeyboardNavigationHandler.js"], t["Accessibility/Utils/HTMLUtilities.js"]], function (t, i, e, n, o, r) { function s(t) { var e = t.legend && t.legend.allItems, i = t.options.legend.accessibility || {}; return e && e.length && (!t.colorAxis || !t.colorAxis.length) && !1 !== i.enabled } var a = e.addEvent, c = e.extend, l = e.find, u = e.fireEvent, h = r.stripHTMLTagsFromString, d = r.removeElement; return t.Chart.prototype.highlightLegendItem = function (t) { var e = this.legend.allItems, i = this.highlightedLegendItemIx; if (e[t]) { e[i] && u(e[i].legendGroup.element, "mouseout"); var n = (i = this.legend).allItems[t].pageIx, o = i.currentPage; return void 0 !== n && n + 1 !== o && i.scroll(1 + n - o), this.setFocusToElement(e[t].legendItem, e[t].a11yProxyElement), u(e[t].legendGroup.element, "mouseover"), !0 } return !1 }, a(i, "afterColorizeItem", function (t) { var e = t.item; this.chart.options.accessibility.enabled && e && e.a11yProxyElement && e.a11yProxyElement.setAttribute("aria-pressed", t.visible ? "false" : "true") }), (t = function () { }).prototype = new n, c(t.prototype, { init: function () { var e = this; this.proxyElementsList = [], this.recreateProxies(), this.addEvent(i, "afterScroll", function () { this.chart === e.chart && (e.updateProxiesPositions(), e.updateLegendItemProxyVisibility(), this.chart.highlightLegendItem(e.highlightedLegendItemIx)) }), this.addEvent(i, "afterPositionItem", function (t) { this.chart === e.chart && this.chart.renderer && e.updateProxyPositionForItem(t.item) }) }, updateLegendItemProxyVisibility: function () { var i = this.chart.legend, n = i.currentPage || 1, o = i.clipHeight || 0; (i.allItems || []).forEach(function (t) { var e = t.pageIx || 0, e = (t._legendItemPos ? t._legendItemPos[1] : 0) + (t.legendItem ? Math.round(t.legendItem.getBBox().height) : 0) - i.pages[e] > o || e !== n - 1; t.a11yProxyElement && (t.a11yProxyElement.style.visibility = e ? "hidden" : "visible") }) }, onChartRender: function () { s(this.chart) ? this.updateProxiesPositions() : this.removeProxies() }, updateProxiesPositions: function () { for (var t = 0, e = this.proxyElementsList; t < e.length; t++) { var i = e[t]; this.updateProxyButtonPosition(i.element, i.posElement) } }, updateProxyPositionForItem: function (e) { var t = l(this.proxyElementsList, function (t) { return t.item === e }); t && this.updateProxyButtonPosition(t.element, t.posElement) }, recreateProxies: function () { this.removeProxies(), s(this.chart) && (this.addLegendProxyGroup(), this.proxyLegendItems(), this.updateLegendItemProxyVisibility()) }, removeProxies: function () { d(this.legendProxyGroup), this.proxyElementsList = [] }, addLegendProxyGroup: function () { var t = this.chart.options.accessibility, e = this.chart.langFormat("accessibility.legend.legendLabel", {}); this.legendProxyGroup = this.addProxyGroup({ "aria-label": e, role: "all" === t.landmarkVerbosity ? "region" : null }) }, proxyLegendItems: function () { var e = this; (this.chart.legend && this.chart.legend.allItems || []).forEach(function (t) { t.legendItem && t.legendItem.element && e.proxyLegendItem(t) }) }, proxyLegendItem: function (t) { var e, i; t.legendItem && t.legendGroup && (e = this.chart.langFormat("accessibility.legend.legendItem", { chart: this.chart, itemName: h(t.name) }), i = t.legendGroup.div ? t.legendItem : t.legendGroup, t.a11yProxyElement = this.createProxyButton(t.legendItem, this.legendProxyGroup, { tabindex: -1, "aria-pressed": !t.visible, "aria-label": e }, i), this.proxyElementsList.push({ item: t, element: t.a11yProxyElement, posElement: i })) }, getKeyboardNavigation: function () { var t = this.keyCodes, e = this; return new o(this.chart, { keyCodeMap: [[[t.left, t.right, t.up, t.down], function (t) { return e.onKbdArrowKey(this, t) }], [[t.enter, t.space], function () { return e.onKbdClick(this) }]], validate: function () { return e.shouldHaveLegendNavigation() }, init: function (t) { return e.onKbdNavigationInit(t) } }) }, onKbdArrowKey: function (t, e) { var i = this.keyCodes, n = t.response, o = this.chart, r = o.options.accessibility, s = o.legend.allItems.length; return e = e === i.left || e === i.up ? -1 : 1, o.highlightLegendItem(this.highlightedLegendItemIx + e) ? (this.highlightedLegendItemIx += e, n.success) : 1 < s && r.keyboardNavigation.wrapAround ? (t.init(e), n.success) : n[0 < e ? "next" : "prev"] }, onKbdClick: function (t) { var e = this.chart.legend.allItems[this.highlightedLegendItemIx]; return e && e.a11yProxyElement && u(e.a11yProxyElement, "click"), t.response.success }, shouldHaveLegendNavigation: function () { var t = this.chart, e = t.colorAxis && t.colorAxis.length, i = (t.options.legend || {}).accessibility || {}; return !!(t.legend && t.legend.allItems && t.legend.display && !e && i.enabled && i.keyboardNavigation && i.keyboardNavigation.enabled) }, onKbdNavigationInit: function (t) { var e = this.chart, i = e.legend.allItems.length - 1; t = 0 < t ? 0 : i, e.highlightLegendItem(t), this.highlightedLegendItemIx = t } }), t }), e(t, "Accessibility/Components/MenuComponent.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/AccessibilityComponent.js"], t["Accessibility/KeyboardNavigationHandler.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/Utils/HTMLUtilities.js"]], function (t, e, i, o, n, r) { function s(t) { return t.exportSVGElements && t.exportSVGElements[0] } e = e.extend; var a = n.unhideChartElementFromAT, c = r.removeElement, l = r.getFakeMouseEvent; return t.Chart.prototype.showExportMenu = function () { var t = s(this); t && (t = t.element).onclick && t.onclick(l("click")) }, t.Chart.prototype.hideExportMenu = function () { var t = this.exportDivElements; t && this.exportContextMenu && (t.forEach(function (t) { "highcharts-menu-item" === t.className && t.onmouseout && t.onmouseout(l("mouseout")) }), this.highlightedExportItemIx = 0, this.exportContextMenu.hideMenu(), this.container.focus()) }, t.Chart.prototype.highlightExportItem = function (t) { var e = this.exportDivElements && this.exportDivElements[t], i = this.exportDivElements && this.exportDivElements[this.highlightedExportItemIx]; if (!e || "LI" !== e.tagName || e.children && e.children.length) return !1; var n = !!(this.renderTo.getElementsByTagName("g")[0] || {}).focus; return e.focus && n && e.focus(), i && i.onmouseout && i.onmouseout(l("mouseout")), e.onmouseover && e.onmouseover(l("mouseover")), this.highlightedExportItemIx = t, !0 }, t.Chart.prototype.highlightLastExportItem = function () { var t; if (this.exportDivElements) for (t = this.exportDivElements.length; t--;)if (this.highlightExportItem(t)) return !0; return !1 }, (t = function () { }).prototype = new i, e(t.prototype, { init: function () { var t = this.chart, e = this; this.addEvent(t, "exportMenuShown", function () { e.onMenuShown() }), this.addEvent(t, "exportMenuHidden", function () { e.onMenuHidden() }) }, onMenuHidden: function () { var t = this.chart.exportContextMenu; t && t.setAttribute("aria-hidden", "true"), this.isExportMenuShown = !1, this.setExportButtonExpandedState("false") }, onMenuShown: function () { var t = this.chart, e = t.exportContextMenu; e && (this.addAccessibleContextMenuAttribs(), a(t, e)), this.isExportMenuShown = !0, this.setExportButtonExpandedState("true") }, setExportButtonExpandedState: function (t) { var e = this.exportButtonProxy; e && e.setAttribute("aria-expanded", t) }, onChartRender: function () { var t = this.chart, e = t.options.accessibility; c(this.exportProxyGroup); var i = t.options.exporting, n = s(t); i && !1 !== i.enabled && i.accessibility && i.accessibility.enabled && n && n.element && (this.exportProxyGroup = this.addProxyGroup("all" === e.landmarkVerbosity ? { "aria-label": t.langFormat("accessibility.exporting.exportRegionLabel", { chart: t }), role: "region" } : {}), e = s(this.chart), this.exportButtonProxy = this.createProxyButton(e, this.exportProxyGroup, { "aria-label": t.langFormat("accessibility.exporting.menuButtonLabel", { chart: t }), "aria-expanded": "false" })) }, addAccessibleContextMenuAttribs: function () { var t = this.chart, e = t.exportDivElements; e && e.length && (e.forEach(function (t) { "LI" !== t.tagName || t.children && t.children.length ? t.setAttribute("aria-hidden", "true") : t.setAttribute("tabindex", -1) }), (e = e[0].parentNode).removeAttribute("aria-hidden"), e.setAttribute("aria-label", t.langFormat("accessibility.exporting.chartMenuLabel", { chart: t }))) }, getKeyboardNavigation: function () { var t = this.keyCodes, i = this.chart, n = this; return new o(i, { keyCodeMap: [[[t.left, t.up], function () { return n.onKbdPrevious(this) }], [[t.right, t.down], function () { return n.onKbdNext(this) }], [[t.enter, t.space], function () { return n.onKbdClick(this) }]], validate: function () { return i.exportChart && !1 !== i.options.exporting.enabled && !1 !== i.options.exporting.accessibility.enabled }, init: function () { var t = n.exportButtonProxy, e = i.exportingGroup; e && t && i.setFocusToElement(e, t) }, terminate: function () { i.hideExportMenu() } }) }, onKbdPrevious: function (t) { var e = this.chart, i = e.options.accessibility; t = t.response; for (var n = e.highlightedExportItemIx || 0; n--;)if (e.highlightExportItem(n)) return t.success; return i.keyboardNavigation.wrapAround ? (e.highlightLastExportItem(), t.success) : t.prev }, onKbdNext: function (t) { var e = this.chart, i = e.options.accessibility; t = t.response; for (var n = (e.highlightedExportItemIx || 0) + 1; n < e.exportDivElements.length; ++n)if (e.highlightExportItem(n)) return t.success; return i.keyboardNavigation.wrapAround ? (e.highlightExportItem(0), t.success) : t.next }, onKbdClick: function (t) { var e = this.chart, i = e.exportDivElements[e.highlightedExportItemIx], n = s(e).element; return this.isExportMenuShown ? this.fakeClickEvent(i) : (this.fakeClickEvent(n), e.highlightExportItem(0)), t.response.success } }), t }), e(t, "Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js", [t["Core/Chart/Chart.js"], t["Core/Globals.js"], t["Core/Series/Point.js"], t["Core/Utilities.js"], t["Accessibility/KeyboardNavigationHandler.js"], t["Accessibility/Utils/EventProvider.js"], t["Accessibility/Utils/ChartUtilities.js"]], function (t, n, e, i, o, r, s) { function a(t) { var e = t.index, i = t.series.points, n = i.length; if (i[e] === t) return e; for (; n--;)if (i[n] === t) return n } function c(t) { var e = t.chart.options.accessibility.keyboardNavigation.seriesNavigation, i = t.options.accessibility || {}, n = i.keyboardNavigation; return n && !1 === n.enabled || !1 === i.enabled || !1 === t.options.enableMouseTracking || !t.visible || e.pointNavigationEnabledThreshold && e.pointNavigationEnabledThreshold <= t.points.length } function l(t) { var e = t.series.chart.options.accessibility; return t.isNull && e.keyboardNavigation.seriesNavigation.skipNullPoints || !1 === t.visible || c(t.series) } function u(t, e, i, n) { function o(t) { return !(p(t.plotX) && p(t.plotY)) } var r = 1 / 0, s = e.points.length; if (!o(t)) { for (; s--;) { var a, c = e.points[s]; !o(c) && (c = (t.plotX - c.plotX) * (t.plotX - c.plotX) * (i || 1) + (t.plotY - c.plotY) * (t.plotY - c.plotY) * (n || 1)) < r && (r = c, a = s) } return p(a) ? e.points[a] : void 0 } } function h(t) { return delete t.highlightedPoint, t.series.reduce(function (t, e) { return t || e.highlightFirstValidPoint() }, !1) } function d(t, e) { this.keyCodes = e, this.chart = t } var p = i.defined; i = i.extend; var m = s.getPointFromXY, g = s.getSeriesFromName, b = s.scrollToPoint; return n.Series.prototype.keyboardMoveVertical = !0, ["column", "pie"].forEach(function (t) { n.seriesTypes[t] && (n.seriesTypes[t].prototype.keyboardMoveVertical = !1) }), e.prototype.highlight = function () { var t = this.series.chart; return this.isNull ? t.tooltip && t.tooltip.hide(0) : this.onMouseOver(), b(this), this.graphic && t.setFocusToElement(this.graphic), t.highlightedPoint = this }, t.prototype.highlightAdjacentPoint = function (t) { var e = this.series, i = this.highlightedPoint, n = i && a(i) || 0, o = i && i.series.points, r = (r = this.series && this.series[this.series.length - 1]) && r.points && r.points[r.points.length - 1]; if (!e[0] || !e[0].points) return !1; if (i) { if (e = e[i.series.index + (t ? 1 : -1)], !(n = o[n + (t ? 1 : -1)]) && e && (n = e.points[t ? 0 : e.points.length - 1]), !n) return !1 } else n = t ? e[0].points[0] : r; return l(n) ? (c(e = n.series) ? this.highlightedPoint = t ? e.points[e.points.length - 1] : e.points[0] : this.highlightedPoint = n, this.highlightAdjacentPoint(t)) : n.highlight() }, n.Series.prototype.highlightFirstValidPoint = function () { var t = this.chart.highlightedPoint, e = (t && t.series) === this ? a(t) : 0, i = (t = this.points).length; if (t && i) { for (var n = e; n < i; ++n)if (!l(t[n])) return t[n].highlight(); for (; 0 <= e; --e)if (!l(t[e])) return t[e].highlight() } return !1 }, t.prototype.highlightAdjacentSeries = function (t) { var e, i = this.highlightedPoint, n = (e = this.series && this.series[this.series.length - 1]) && e.points && e.points[e.points.length - 1]; return this.highlightedPoint ? !!(e = this.series[i.series.index + (t ? -1 : 1)]) && (!!(n = u(i, e, 4)) && (c(e) ? (n.highlight(), (t = this.highlightAdjacentSeries(t)) || (i.highlight(), !1)) : (n.highlight(), n.series.highlightFirstValidPoint()))) : (e = t ? this.series && this.series[0] : e, !!(n = t ? e && e.points && e.points[0] : n) && n.highlight()) }, t.prototype.highlightAdjacentPointVertical = function (o) { var r, s = this.highlightedPoint, a = 1 / 0; return !(!p(s.plotX) || !p(s.plotY)) && (this.series.forEach(function (n) { c(n) || n.points.forEach(function (t) { var e, i; p(t.plotY) && p(t.plotX) && t !== s && (e = t.plotY - s.plotY, i = Math.abs(t.plotX - s.plotX), i = Math.abs(e) * Math.abs(e) + i * i * 4, n.yAxis && n.yAxis.reversed && (e *= -1), !(e <= 0 && o || 0 <= e && !o || i < 5 || l(t)) && i < a && (a = i, r = t)) }) }), !!r && r.highlight()) }, i(d.prototype, { init: function () { var i = this, t = this.chart, e = this.eventProvider = new r; e.addEvent(n.Series, "destroy", function () { return i.onSeriesDestroy(this) }), e.addEvent(t, "afterDrilldown", function () { h(this), this.focusElement && this.focusElement.removeFocusBorder() }), e.addEvent(t, "drilldown", function (t) { var e = (t = t.point).series; i.lastDrilledDownPoint = { x: t.x, y: t.y, seriesName: e ? e.name : "" } }), e.addEvent(t, "drillupall", function () { setTimeout(function () { i.onDrillupAll() }, 10) }) }, onDrillupAll: function () { var t, e = this.lastDrilledDownPoint, i = this.chart, n = e && g(i, e.seriesName); e && n && p(e.x) && p(e.y) && (t = m(n, e.x, e.y)), i.container && i.container.focus(), t && t.highlight && t.highlight(), i.focusElement && i.focusElement.removeFocusBorder() }, getKeyboardNavigationHandler: function () { var e = this, t = this.keyCodes, i = this.chart, n = i.inverted; return new o(i, { keyCodeMap: [[n ? [t.up, t.down] : [t.left, t.right], function (t) { return e.onKbdSideways(this, t) }], [n ? [t.left, t.right] : [t.up, t.down], function (t) { return e.onKbdVertical(this, t) }], [[t.enter, t.space], function () { return i.highlightedPoint && i.highlightedPoint.firePointEvent("click"), this.response.success }]], init: function (t) { return e.onHandlerInit(this, t) }, terminate: function () { return e.onHandlerTerminate() } }) }, onKbdSideways: function (t, e) { var i = this.keyCodes; return this.attemptHighlightAdjacentPoint(t, e === i.right || e === i.down) }, onKbdVertical: function (t, e) { var i = this.chart, n = this.keyCodes; return e = e === n.down || e === n.right, (n = i.options.accessibility.keyboardNavigation.seriesNavigation).mode && "serialize" === n.mode ? this.attemptHighlightAdjacentPoint(t, e) : (i[i.highlightedPoint && i.highlightedPoint.series.keyboardMoveVertical ? "highlightAdjacentPointVertical" : "highlightAdjacentSeries"](e), t.response.success) }, onHandlerInit: function (t, e) { var i = this.chart; if (0 < e) h(i); else { e = i.series.length; for (; e-- && (i.highlightedPoint = i.series[e].points[i.series[e].points.length - 1], !i.series[e].highlightFirstValidPoint());); } return t.response.success }, onHandlerTerminate: function () { var t, e, i = this.chart, n = i.highlightedPoint; null !== (t = i.tooltip) && void 0 !== t && t.hide(0), null !== (e = null == n ? void 0 : n.onMouseOut) && void 0 !== e && e.call(n), delete i.highlightedPoint }, attemptHighlightAdjacentPoint: function (t, e) { var i = this.chart, n = i.options.accessibility.keyboardNavigation.wrapAround; return i.highlightAdjacentPoint(e) ? t.response.success : n ? t.init(e ? 1 : -1) : t.response[e ? "next" : "prev"] }, onSeriesDestroy: function (t) { var e = this.chart; e.highlightedPoint && e.highlightedPoint.series === t && (delete e.highlightedPoint, e.focusElement && e.focusElement.removeFocusBorder()) }, destroy: function () { this.eventProvider.removeAddedEvents() } }), d }), e(t, "Accessibility/Components/AnnotationsA11y.js", [t["Accessibility/Utils/HTMLUtilities.js"]], function (t) { function i(t) { return (t.annotations || []).reduce(function (t, e) { var i; return !1 !== (null === (i = e.options) || void 0 === i ? void 0 : i.visible) && (t = t.concat(e.labels)), t }, []) } function r(t) { var e, i, n, o, r = null === (i = null === (e = t.options) || void 0 === e ? void 0 : e.accessibility) || void 0 === i ? void 0 : i.description; return r || ((null === (o = null === (n = t.graphic) || void 0 === n ? void 0 : n.text) || void 0 === o ? void 0 : o.textStr) || "") } function e(t) { var e, i, n = null === (i = null === (e = t.options) || void 0 === e ? void 0 : e.accessibility) || void 0 === i ? void 0 : i.description; if (n) return n; e = t.chart, i = r(t); var o = (n = t.points.filter(function (t) { return !!t.graphic }).map(function (t) { var e, i, n, o; return (o = null === (e = null == t ? void 0 : t.accessibility) || void 0 === e ? void 0 : e.valueDescription) || (o = (null === (n = null === (i = null == t ? void 0 : t.graphic) || void 0 === i ? void 0 : i.element) || void 0 === n ? void 0 : n.getAttribute("aria-label")) || ""), ((t = (null == t ? void 0 : t.series.name) || "") ? t + ", " : "") + "data point " + o }).filter(function (t) { return !!t })).length; return t = "accessibility.screenReaderSection.annotations.description" + (1 < o ? "MultiplePoints" : o ? "SinglePoint" : "NoPoints"), i = { annotationText: i, numPoints: o, annotationPoint: n[0], additionalAnnotationPoints: n.slice(1) }, e.langFormat(t, i) } function n(t) { return i(t).map(function (t) { return (t = o(s(e(t)))) ? "<li>" + t + "</li>" : "" }) } var o = t.escapeStringForHTML, s = t.stripHTMLTagsFromString; return { getAnnotationsInfoHTML: function (t) { var e = t.annotations; return e && e.length ? "<ul>" + n(t).join(" ") + "</ul>" : "" }, getAnnotationLabelDescription: e, getAnnotationListItems: n, getPointAnnotationTexts: function (e) { var t = i(e.series.chart).filter(function (t) { return -1 < t.points.indexOf(e) }); return t.length ? t.map(function (t) { return "" + r(t) }) : [] } } }), e(t, "Accessibility/Components/SeriesComponent/SeriesDescriber.js", [t["Core/Utilities.js"], t["Accessibility/Components/AnnotationsA11y.js"], t["Accessibility/Utils/HTMLUtilities.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Core/Tooltip.js"]], function (t, e, i, n, o) { function a(t) { var e = t.chart.options.accessibility.series.pointDescriptionEnabledThreshold; return !1 !== e && t.points && t.points.length >= e } function c(t, e) { var i = t.series.chart, n = i.options.accessibility.point || {}; return t = t.series.tooltipOptions || {}, i = i.options.lang, f(e) ? y(e, n.valueDecimals || t.valueDecimals || -1, i.decimalPoint, i.accessibility.thousandsSep || i.thousandsSep) : e } function u(t, e) { return t.chart.langFormat("accessibility.series." + e + "Description", { name: E(t[e]), series: t }) } function r(t) { var e = t.series, i = e.chart, n = i.options.accessibility.point || {}; if (e.xAxis && e.xAxis.dateTime) return e = o.prototype.getXDateFormat.call({ getDateFormat: o.prototype.getDateFormat, chart: i }, t, i.options.tooltip, e.xAxis), n = n.dateFormatter && n.dateFormatter(t) || n.dateFormat || e, i.time.dateFormat(n, t.x, void 0) } function s(t) { var e = r(t), i = (t.series.xAxis || {}).categories && x(t.category) && ("" + t.category).replace("<br/>", " "), n = t.id && t.id.indexOf("highcharts-") < 0, o = "x, " + t.x; return t.name || e || i || (n ? t.id : o) } function l(t) { var n, o, r, e = t.series, i = e.chart.options.accessibility.point || {}, s = e.tooltipOptions || {}, a = i.valuePrefix || s.valuePrefix || "", i = i.valueSuffix || s.valueSuffix || "", s = c(t, t[void 0 !== t.value ? "value" : "y"]); return t.isNull ? e.chart.langFormat("accessibility.series.nullPointValue", { point: t }) : e.pointArrayMap ? (o = a || "", r = i || "", (n = t).series.pointArrayMap.reduce(function (t, e) { t += t.length ? ", " : ""; var i = c(n, v(n[e], n.options[e])); return t + (e + ": ") + o + i + r }, "")) : a + s + i } function h(t) { var e = t.series, i = e.chart, n = i.options.accessibility.point.valueDescriptionFormat, o = (e = v(e.xAxis && e.xAxis.options.accessibility && e.xAxis.options.accessibility.enabled, !i.angular)) ? s(t) : ""; return t = { point: t, index: x(t.index) ? t.index + 1 : "", xDescription: o, value: l(t), separator: e ? ", " : "" }, b(n, t, i) } function d(t) { var e = (o = t.series).chart, i = h(t), n = (n = t.options && t.options.accessibility && t.options.accessibility.description) ? " " + n : "", o = 1 < e.series.length && o.name ? " " + o.name + "." : "", e = t.series.chart, r = A(t), s = { point: t, annotations: r }; return e = r.length ? e.langFormat("accessibility.series.pointAnnotationsDescription", s) : "", t.accessibility = t.accessibility || {}, (t.accessibility.valueDescription = i) + n + o + (e ? " " + e : "") } function p(t) { var e, i, n, o, s = (o = (n = t).options.accessibility || {}, !a(n) && !o.exposeAsGroupOnly), r = (i = (e = t).chart.options.accessibility.keyboardNavigation.seriesNavigation, !(!e.points || !(e.points.length < i.pointNavigationEnabledThreshold || !1 === i.pointNavigationEnabledThreshold))); (s || r) && t.points.forEach(function (t) { var e, i, n, o, r; !(e = t.graphic && t.graphic.element) && (e = t.series && t.series.is("sunburst"), e = t.isNull && !e) && (i = t.series, i = (e = (n = (r = (o = t).index, o.series && o.series.data && x(r) && g(o.series.data, function (t) { return !!(t && void 0 !== t.index && t.index > r && t.graphic && t.graphic.element) }) || null)) && n.graphic) ? e.parentGroup : i.graph || i.group, n = n ? { x: v(t.plotX, n.plotX, 0), y: v(t.plotY, n.plotY, 0) } : { x: v(t.plotX, 0), y: v(t.plotY, 0) }, (n = t.series.chart.renderer.rect(n.x, n.y, 1, 1)).attr({ class: "highcharts-a11y-dummy-point", fill: "none", opacity: 0, "fill-opacity": 0, "stroke-opacity": 0 }), e = i && i.element ? (t.graphic = n, t.hasDummyGraphic = !0, n.add(i), i.element.insertBefore(n.element, e ? e.element : null), n.element) : void 0), e && (e.setAttribute("tabindex", "-1"), e.style.outline = "0", s ? (i = (n = t.series).chart.options.accessibility.point || {}, n = n.options.accessibility || {}, t = C(T(n.pointDescriptionFormatter && n.pointDescriptionFormatter(t) || i.descriptionFormatter && i.descriptionFormatter(t) || d(t))), e.setAttribute("role", "img"), e.setAttribute("aria-label", t)) : e.setAttribute("aria-hidden", !0)) }) } function m(e) { function t(t) { return o[t] && 1 < o[t].length && e[t] } var i, n, o = e.chart, r = o.types || [], s = (n = ((i = e).options.accessibility || {}).description) && i.chart.langFormat("accessibility.series.description", { description: n, series: i }) || "", a = u(e, "xAxis"), c = u(e, "yAxis"), l = { name: e.name || "", ix: e.index + 1, numSeries: o.series && o.series.length, numPoints: e.points && e.points.length, series: e }, r = 1 < r.length ? "Combination" : ""; return (o.langFormat("accessibility.series.summary." + e.type + r, l) || o.langFormat("accessibility.series.summary.default" + r, l)) + (s ? " " + s : "") + (t("yAxis") ? " " + c : "") + (t("xAxis") ? " " + a : "") } var g = t.find, b = t.format, f = t.isNumber, y = t.numberFormat, v = t.pick, x = t.defined, A = e.getPointAnnotationTexts, C = i.escapeStringForHTML, w = i.reverseChildNodes, T = i.stripHTMLTagsFromString, E = n.getAxisDescription, S = n.getSeriesFirstPointElement, P = n.getSeriesA11yElement, k = n.unhideChartElementFromAT; return { describeSeries: function (t) { var e, i = t.chart, n = S(t), o = P(t), r = i.is3d && i.is3d(); o && (o.lastChild !== n || r || w(o), p(t), k(i, o), i = (r = t.chart).options.chart || {}, n = 1 < r.series.length, r = r.options.accessibility.series.describeSingleSeries, e = (t.options.accessibility || {}).exposeAsGroupOnly, i.options3d && i.options3d.enabled && n || !(n || r || e || a(t)) ? o.setAttribute("aria-label", "") : (n = (i = t.chart.options.accessibility).landmarkVerbosity, (t.options.accessibility || {}).exposeAsGroupOnly ? o.setAttribute("role", "img") : "all" === n && o.setAttribute("role", "region"), o.setAttribute("tabindex", "-1"), o.style.outline = "0", o.setAttribute("aria-label", C(T(i.series.descriptionFormatter && i.series.descriptionFormatter(t) || m(t)))))) }, defaultPointDescriptionFormatter: d, defaultSeriesDescriptionFormatter: m, getPointA11yTimeDescription: r, getPointXDescription: s, getPointValue: l, getPointValueDescription: h } }), e(t, "Accessibility/Utils/Announcer.js", [t["Core/Globals.js"], t["Accessibility/Utils/DOMElementProvider.js"], t["Accessibility/Utils/HTMLUtilities.js"]], function (t, i, e) { var n = e.visuallyHideElement; function o(t, e) { this.chart = t, this.domElementProvider = new i, this.announceRegion = this.addAnnounceRegion(e) } return o.prototype.destroy = function () { this.domElementProvider.destroyCreatedElements() }, o.prototype.announce = function (t) { var e = this; this.announceRegion.innerHTML = t, this.clearAnnouncementRegionTimer && clearTimeout(this.clearAnnouncementRegionTimer), this.clearAnnouncementRegionTimer = setTimeout(function () { e.announceRegion.innerHTML = "", delete e.clearAnnouncementRegionTimer }, 1e3) }, o.prototype.addAnnounceRegion = function (t) { var e = this.chart.renderTo, i = this.domElementProvider.createElement("div"); return i.setAttribute("aria-hidden", !1), i.setAttribute("aria-live", t), n(i), e.insertBefore(i, e.firstChild), i }, e = o, t.Announcer = e }), e(t, "Accessibility/Components/SeriesComponent/NewDataAnnouncer.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"], t["Accessibility/Utils/Announcer.js"], t["Accessibility/Utils/EventProvider.js"]], function (r, t, e, i, n, o) { var s = t.extend, a = t.defined, c = e.getChartTitle, l = i.defaultPointDescriptionFormatter, u = i.defaultSeriesDescriptionFormatter; return s((t = function (t) { this.chart = t }).prototype, { init: function () { var t = this.chart, e = t.options.accessibility.announceNewData.interruptUser ? "assertive" : "polite"; this.lastAnnouncementTime = 0, this.dirty = { allSeries: {} }, this.eventProvider = new o, this.announcer = new n(t, e), this.addEventListeners() }, destroy: function () { this.eventProvider.removeAddedEvents(), this.announcer.destroy() }, addEventListeners: function () { var e = this, t = this.chart, i = this.eventProvider; i.addEvent(t, "afterDrilldown", function () { e.lastAnnouncementTime = 0 }), i.addEvent(r.Series, "updatedData", function () { e.onSeriesUpdatedData(this) }), i.addEvent(t, "afterAddSeries", function (t) { e.onSeriesAdded(t.series) }), i.addEvent(r.Series, "addPoint", function (t) { e.onPointAdded(t.point) }), i.addEvent(t, "redraw", function () { e.announceDirtyData() }) }, onSeriesUpdatedData: function (t) { var e = this.chart; t.chart === e && e.options.accessibility.announceNewData.enabled && (this.dirty.hasDirty = !0, this.dirty.allSeries[t.name + t.index] = t) }, onSeriesAdded: function (t) { this.chart.options.accessibility.announceNewData.enabled && (this.dirty.hasDirty = !0, this.dirty.allSeries[t.name + t.index] = t, this.dirty.newSeries = a(this.dirty.newSeries) ? void 0 : t) }, onPointAdded: function (t) { var e = t.series.chart; this.chart === e && e.options.accessibility.announceNewData.enabled && (this.dirty.newPoint = a(this.dirty.newPoint) ? void 0 : t) }, announceDirtyData: function () { var t, e, i, n = this; this.chart.options.accessibility.announceNewData && this.dirty.hasDirty && ((t = this.dirty.newPoint) && (t = 1 === (i = (e = t).series.data.filter(function (t) { return e.x === t.x && e.y === t.y })).length ? i[0] : e), this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(function (t) { return n.dirty.allSeries[t] }), this.dirty.newSeries, t), this.dirty = { allSeries: {} }) }, queueAnnouncement: function (t, e, i) { var n, o, r, s = this, a = this.chart.options.accessibility.announceNewData; a.enabled && (n = +new Date, a = Math.max(0, a.minAnnounceInterval - (n - this.lastAnnouncementTime)), o = this.queuedAnnouncement && this.queuedAnnouncement.series, r = (o || []).concat(t || []).reduce(function (t, e) { return t[e.name + e.index] = e, t }, {}), t = Object.keys(r).map(function (t) { return r[t] }), (e = this.buildAnnouncementMessage(t, e, i)) && (this.queuedAnnouncement && clearTimeout(this.queuedAnnouncementTimer), this.queuedAnnouncement = { time: n, message: e, series: t }, this.queuedAnnouncementTimer = setTimeout(function () { s && s.announcer && (s.lastAnnouncementTime = +new Date, s.announcer.announce(s.queuedAnnouncement.message), delete s.queuedAnnouncement, delete s.queuedAnnouncementTimer) }, a))) }, buildAnnouncementMessage: function (t, e, i) { var n = this.chart, o = n.options.accessibility.announceNewData; return o.announcementFormatter && !1 !== (t = o.announcementFormatter(t, e, i)) ? t.length ? t : null : (t = r.charts && 1 < r.charts.length ? "Multiple" : "Single", t = e ? "newSeriesAnnounce" + t : i ? "newPointAnnounce" + t : "newDataAnnounce", o = c(n), n.langFormat("accessibility.announceNewData." + t, { chartTitle: o, seriesDesc: e ? u(e) : null, pointDesc: i ? l(i) : null, point: i, series: e })) } }), t }), e(t, "Accessibility/Components/SeriesComponent/ForcedMarkers.js", [t["Core/Globals.js"], t["Core/Utilities.js"]], function (t, e) { function n(t) { o(!0, t, { marker: { enabled: !0, states: { normal: { opacity: 0 } } } }) } var i = e.addEvent, o = e.merge; return function () { i(t.Series, "render", function () { var t = this.options, e = !1 !== (this.options.accessibility && this.options.accessibility.enabled); if ((e = this.chart.options.accessibility.enabled && e) && (e = this.chart.options.accessibility, e = this.points.length < e.series.pointDescriptionEnabledThreshold || !1 === e.series.pointDescriptionEnabledThreshold), e) { if (t.marker && !1 === t.marker.enabled && (this.a11yMarkersForced = !0, n(this.options)), this._hasPointMarkers && this.points && this.points.length) for (t = this.points.length; t--;) { var i = (e = this.points[t]).options; delete e.hasForcedA11yMarker, i.marker && (i.marker.enabled ? (o(!0, i.marker, { states: { normal: { opacity: i.marker.states && i.marker.states.normal && i.marker.states.normal.opacity || 1 } } }), e.hasForcedA11yMarker = !1) : (n(i), e.hasForcedA11yMarker = !0)) } } else this.a11yMarkersForced && (delete this.a11yMarkersForced, (t = this.resetA11yMarkerOptions) && o(!0, this.options, { marker: { enabled: t.enabled, states: { normal: { opacity: t.states && t.states.normal && t.states.normal.opacity } } } })) }), i(t.Series, "afterSetOptions", function (t) { this.resetA11yMarkerOptions = o(t.options.marker || {}, this.userOptions.marker || {}) }), i(t.Series, "afterRender", function () { this.chart.styledMode && (this.markerGroup && this.markerGroup[this.a11yMarkersForced ? "addClass" : "removeClass"]("highcharts-a11y-markers-hidden"), this._hasPointMarkers && this.points && this.points.length && this.points.forEach(function (t) { t.graphic && (t.graphic[t.hasForcedA11yMarker ? "addClass" : "removeClass"]("highcharts-a11y-marker-hidden"), t.graphic[!1 === t.hasForcedA11yMarker ? "addClass" : "removeClass"]("highcharts-a11y-marker-visible")) })) }) } }), e(t, "Accessibility/Components/SeriesComponent/SeriesComponent.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/AccessibilityComponent.js"], t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"], t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"], t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"], t["Core/Tooltip.js"]], function (t, e, i, n, o, r, s, a, c) { e = e.extend; var l = s.hideSeriesFromAT, u = a.describeSeries; return t.SeriesAccessibilityDescriber = a, r(), (t = function () { }).prototype = new i, e(t.prototype, { init: function () { this.newDataAnnouncer = new o(this.chart), this.newDataAnnouncer.init(), this.keyboardNavigation = new n(this.chart, this.keyCodes), this.keyboardNavigation.init(), this.hideTooltipFromATWhenShown(), this.hideSeriesLabelsFromATWhenShown() }, hideTooltipFromATWhenShown: function () { var t = this; this.addEvent(c, "refresh", function () { this.chart === t.chart && this.label && this.label.element && this.label.element.setAttribute("aria-hidden", !0) }) }, hideSeriesLabelsFromATWhenShown: function () { this.addEvent(this.chart, "afterDrawSeriesLabels", function () { this.series.forEach(function (t) { t.labelBySeries && t.labelBySeries.attr("aria-hidden", !0) }) }) }, onChartRender: function () { this.chart.series.forEach(function (t) { (!1 !== (t.options.accessibility && t.options.accessibility.enabled) && t.visible ? u : l)(t) }) }, getKeyboardNavigation: function () { return this.keyboardNavigation.getKeyboardNavigationHandler() }, destroy: function () { this.newDataAnnouncer.destroy(), this.keyboardNavigation.destroy() } }), t }), e(t, "Accessibility/Components/ZoomComponent.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/AccessibilityComponent.js"], t["Accessibility/KeyboardNavigationHandler.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/Utils/HTMLUtilities.js"]], function (t, e, i, s, n, o) { var r = e.extend, a = e.pick, c = n.unhideChartElementFromAT, l = o.setElAttrs, u = o.removeElement; return t.Axis.prototype.panStep = function (t, e) { var i = e || 3, n = ((e = this.getExtremes()).max - e.min) / i * t, o = (i = e.max + n) - (n = e.min + n); t < 0 && n < e.dataMin ? i = (n = e.dataMin) + o : 0 < t && i > e.dataMax && (n = (i = e.dataMax) - o), this.setExtremes(n, i) }, (t = function () { }).prototype = new i, r(t.prototype, { init: function () { var e = this, i = this.chart;["afterShowResetZoom", "afterDrilldown", "drillupall"].forEach(function (t) { e.addEvent(i, t, function () { e.updateProxyOverlays() }) }) }, onChartUpdate: function () { var i = this.chart, n = this; i.mapNavButtons && i.mapNavButtons.forEach(function (t, e) { c(i, t.element), n.setMapNavButtonAttrs(t.element, "accessibility.zoom.mapZoom" + (e ? "Out" : "In")) }) }, setMapNavButtonAttrs: function (t, e) { var i = this.chart; e = i.langFormat(e, { chart: i }), l(t, { tabindex: -1, role: "button", "aria-label": e }) }, onChartRender: function () { this.updateProxyOverlays() }, updateProxyOverlays: function () { var t = this.chart; u(this.drillUpProxyGroup), u(this.resetZoomProxyGroup), t.resetZoomButton && this.recreateProxyButtonAndGroup(t.resetZoomButton, "resetZoomProxyButton", "resetZoomProxyGroup", t.langFormat("accessibility.zoom.resetZoomButton", { chart: t })), t.drillUpButton && this.recreateProxyButtonAndGroup(t.drillUpButton, "drillUpProxyButton", "drillUpProxyGroup", t.langFormat("accessibility.drillUpButton", { chart: t, buttonText: t.getDrilldownBackText() })) }, recreateProxyButtonAndGroup: function (t, e, i, n) { u(this[i]), this[i] = this.addProxyGroup(), this[e] = this.createProxyButton(t, this[i], { "aria-label": n, tabindex: -1 }) }, getMapZoomNavigation: function () { var t = this.keyCodes, e = this.chart, i = this; return new s(e, { keyCodeMap: [[[t.up, t.down, t.left, t.right], function (t) { return i.onMapKbdArrow(this, t) }], [[t.tab], function (t, e) { return i.onMapKbdTab(this, e) }], [[t.space, t.enter], function () { return i.onMapKbdClick(this) }]], validate: function () { return !!(e.mapZoom && e.mapNavButtons && e.mapNavButtons.length) }, init: function (t) { return i.onMapNavInit(t) } }) }, onMapKbdArrow: function (t, e) { var i = this.keyCodes; return this.chart[e === i.up || e === i.down ? "yAxis" : "xAxis"][0].panStep(e === i.left || e === i.up ? -1 : 1), t.response.success }, onMapKbdTab: function (t, e) { var i = this.chart; t = t.response; var n = (e = e.shiftKey) && !this.focusedMapNavButtonIx || !e && this.focusedMapNavButtonIx; return i.mapNavButtons[this.focusedMapNavButtonIx].setState(0), n ? (i.mapZoom(), t[e ? "prev" : "next"]) : (this.focusedMapNavButtonIx += e ? -1 : 1, e = i.mapNavButtons[this.focusedMapNavButtonIx], i.setFocusToElement(e.box, e.element), e.setState(2), t.success) }, onMapKbdClick: function (t) { return this.fakeClickEvent(this.chart.mapNavButtons[this.focusedMapNavButtonIx].element), t.response.success }, onMapNavInit: function (t) { var e = this.chart, i = e.mapNavButtons[0], n = e.mapNavButtons[1], i = 0 < t ? i : n; e.setFocusToElement(i.box, i.element), i.setState(2), this.focusedMapNavButtonIx = 0 < t ? 0 : 1 }, simpleButtonNavigation: function (t, e, i) { var n = this.keyCodes, o = this, r = this.chart; return new s(r, { keyCodeMap: [[[n.tab, n.up, n.down, n.left, n.right], function (t, e) { return this.response[t === n.tab && e.shiftKey || t === n.left || t === n.up ? "prev" : "next"] }], [[n.space, n.enter], function () { var t = i(this, r); return a(t, this.response.success) }]], validate: function () { return r[t] && r[t].box && o[e] }, init: function () { r.setFocusToElement(r[t].box, o[e]) } }) }, getKeyboardNavigation: function () { return [this.simpleButtonNavigation("resetZoomButton", "resetZoomProxyButton", function (t, e) { e.zoomOut() }), this.simpleButtonNavigation("drillUpButton", "drillUpProxyButton", function (t, e) { return e.drillUp(), t.response.prev }), this.getMapZoomNavigation()] } }), t }), e(t, "Accessibility/Components/RangeSelectorComponent.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/AccessibilityComponent.js"], t["Accessibility/KeyboardNavigationHandler.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/Utils/HTMLUtilities.js"]], function (t, e, i, o, n, r) { e = e.extend; var s = n.unhideChartElementFromAT, a = r.setElAttrs; return t.Chart.prototype.highlightRangeSelectorButton = function (t) { var e = this.rangeSelector.buttons, i = this.highlightedRangeSelectorItemIx; return void 0 !== i && e[i] && e[i].setState(this.oldRangeSelectorItemState || 0), !!e[this.highlightedRangeSelectorItemIx = t] && (this.setFocusToElement(e[t].box, e[t].element), this.oldRangeSelectorItemState = e[t].state, e[t].setState(2), !0) }, (t = function () { }).prototype = new i, e(t.prototype, { onChartUpdate: function () { var i = this.chart, n = this, o = i.rangeSelector; o && (o.buttons && o.buttons.length && o.buttons.forEach(function (t) { s(i, t.element), n.setRangeButtonAttrs(t) }), o.maxInput && o.minInput && ["minInput", "maxInput"].forEach(function (t, e) { (t = o[t]) && (s(i, t), n.setRangeInputAttrs(t, "accessibility.rangeSelector." + (e ? "max" : "min") + "InputLabel")) })) }, setRangeButtonAttrs: function (t) { var e = (e = this.chart).langFormat("accessibility.rangeSelector.buttonText", { chart: e, buttonText: t.text && t.text.textStr }); a(t.element, { tabindex: -1, role: "button", "aria-label": e }) }, setRangeInputAttrs: function (t, e) { var i = this.chart; a(t, { tabindex: -1, role: "textbox", "aria-label": i.langFormat(e, { chart: i }) }) }, getRangeSelectorButtonNavigation: function () { var i = this.chart, t = this.keyCodes, e = this; return new o(i, { keyCodeMap: [[[t.left, t.right, t.up, t.down], function (t) { return e.onButtonNavKbdArrowKey(this, t) }], [[t.enter, t.space], function () { return e.onButtonNavKbdClick(this) }]], validate: function () { return i.rangeSelector && i.rangeSelector.buttons && i.rangeSelector.buttons.length }, init: function (t) { var e = i.rangeSelector.buttons.length - 1; i.highlightRangeSelectorButton(0 < t ? 0 : e) } }) }, onButtonNavKbdArrowKey: function (t, e) { var i = t.response, n = this.keyCodes, o = this.chart, r = o.options.accessibility.keyboardNavigation.wrapAround; return e = e === n.left || e === n.up ? -1 : 1, o.highlightRangeSelectorButton(o.highlightedRangeSelectorItemIx + e) ? i.success : r ? (t.init(e), i.success) : i[0 < e ? "next" : "prev"] }, onButtonNavKbdClick: function (t) { t = t.response; var e = this.chart; return 3 !== e.oldRangeSelectorItemState && this.fakeClickEvent(e.rangeSelector.buttons[e.highlightedRangeSelectorItemIx].element), t.success }, getRangeSelectorInputNavigation: function () { var t = this.chart, i = this.keyCodes, n = this; return new o(t, { keyCodeMap: [[[i.tab, i.up, i.down], function (t, e) { return n.onInputKbdMove(this, t === i.tab && e.shiftKey || t === i.up ? -1 : 1) }]], validate: function () { return t.rangeSelector && t.rangeSelector.inputGroup && "hidden" !== t.rangeSelector.inputGroup.element.getAttribute("visibility") && !1 !== t.options.rangeSelector.inputEnabled && t.rangeSelector.minInput && t.rangeSelector.maxInput }, init: function (t) { n.onInputNavInit(t) }, terminate: function () { n.onInputNavTerminate() } }) }, onInputKbdMove: function (t, e) { var i = this.chart; t = t.response; var n = i.highlightedInputRangeIx += e; return 1 < n || n < 0 ? t[0 < e ? "next" : "prev"] : (i.rangeSelector[n ? "maxInput" : "minInput"].focus(), t.success) }, onInputNavInit: function (t) { var e = this.chart; t = 0 < t ? 0 : 1, e.highlightedInputRangeIx = t, e.rangeSelector[t ? "maxInput" : "minInput"].focus() }, onInputNavTerminate: function () { var t = this.chart.rangeSelector || {}; t.maxInput && t.hideInput("max"), t.minInput && t.hideInput("min") }, getKeyboardNavigation: function () { return [this.getRangeSelectorButtonNavigation(), this.getRangeSelectorInputNavigation()] } }), t }), e(t, "Accessibility/Components/InfoRegionsComponent.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/AccessibilityComponent.js"], t["Accessibility/Utils/Announcer.js"], t["Accessibility/Components/AnnotationsA11y.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/Utils/HTMLUtilities.js"]], function (c, t, e, i, n, o, r) { function l(t) { return t.replace(/&lt;(h[1-7]|p|div|ul|ol|li)&gt;/g, "<$1>").replace(/&lt;&#x2F;(h[1-7]|p|div|ul|ol|li|a|button)&gt;/g, "</$1>").replace(/&lt;(div|a|button) id=&quot;([a-zA-Z\-0-9#]*?)&quot;&gt;/g, '<$1 id="$2">') } var s = c.doc, a = t.extend, u = t.format, h = t.pick, d = n.getAnnotationsInfoHTML, p = o.unhideChartElementFromAT, m = o.getChartTitle, g = o.getAxisDescription, b = r.addClass, f = r.setElAttrs, y = r.escapeStringForHTML, v = r.stripHTMLTagsFromString, x = r.getElement, A = r.visuallyHideElement; return c.Chart.prototype.getTypeDescription = function (t) { var e = t[0], i = this.series && this.series[0] || {}, i = { numSeries: this.series.length, numPoints: i.points && i.points.length, chart: this, mapTitle: i.mapTitle }; if (!e) return this.langFormat("accessibility.chartTypes.emptyChart", i); if ("map" === e) return i.mapTitle ? this.langFormat("accessibility.chartTypes.mapTypeDescription", i) : this.langFormat("accessibility.chartTypes.unknownMap", i); if (1 < this.types.length) return this.langFormat("accessibility.chartTypes.combinationChart", i); t = t[0], e = this.langFormat("accessibility.seriesTypeDescriptions." + t, i); var n = this.series && this.series.length < 2 ? "Single" : "Multiple"; return (this.langFormat("accessibility.chartTypes." + t + n, i) || this.langFormat("accessibility.chartTypes.default" + n, i)) + (e ? " " + e : "") }, (t = function () { }).prototype = new e, a(t.prototype, { init: function () { var t = this.chart, e = this; this.initRegionsDefinitions(), this.addEvent(t, "afterGetTable", function (t) { e.onDataTableCreated(t) }), this.addEvent(t, "afterViewData", function (t) { e.dataTableDiv = t, setTimeout(function () { e.focusDataTable() }, 300) }), this.announcer = new i(t, "assertive") }, initRegionsDefinitions: function () { var i = this; this.screenReaderSections = { before: { element: null, buildContent: function (t) { var e = t.options.accessibility.screenReaderSection.beforeChartFormatter; return e ? e(t) : i.defaultBeforeChartFormatter(t) }, insertIntoDOM: function (t, e) { e.renderTo.insertBefore(t, e.renderTo.firstChild) }, afterInserted: function () { void 0 !== i.sonifyButtonId && i.initSonifyButton(i.sonifyButtonId), void 0 !== i.dataTableButtonId && i.initDataTableButton(i.dataTableButtonId) } }, after: { element: null, buildContent: function (t) { var e = t.options.accessibility.screenReaderSection.afterChartFormatter; return e ? e(t) : i.defaultAfterChartFormatter() }, insertIntoDOM: function (t, e) { e.renderTo.insertBefore(t, e.container.nextSibling) } } } }, onChartRender: function () { var e = this; this.linkedDescriptionElement = this.getLinkedDescriptionElement(), this.setLinkedDescriptionAttrs(), Object.keys(this.screenReaderSections).forEach(function (t) { e.updateScreenReaderSection(t) }) }, getLinkedDescriptionElement: function () { var t = this.chart.options.accessibility.linkedDescription; if (t) { if ("string" != typeof t) return t; if (t = u(t, this.chart), 1 === (t = s.querySelectorAll(t)).length) return t[0] } }, setLinkedDescriptionAttrs: function () { var t = this.linkedDescriptionElement; t && (t.setAttribute("aria-hidden", "true"), b(t, "highcharts-linked-description")) }, updateScreenReaderSection: function (t) { var e = this.chart, i = this.screenReaderSections[t], n = i.buildContent(e), o = i.element = i.element || this.createElement("div"), r = o.firstChild || this.createElement("div"); this.setScreenReaderSectionAttribs(o, t), r.innerHTML = n, o.appendChild(r), i.insertIntoDOM(o, e), A(r), p(e, r), i.afterInserted && i.afterInserted() }, setScreenReaderSectionAttribs: function (t, e) { var i = this.chart, n = i.langFormat("accessibility.screenReaderSection." + e + "RegionLabel", { chart: i }); f(t, { id: "highcharts-screen-reader-region-" + e + "-" + i.index, "aria-label": n }), t.style.position = "relative", "all" === i.options.accessibility.landmarkVerbosity && n && t.setAttribute("role", "region") }, defaultBeforeChartFormatter: function () { var t = (a = this.chart).options.accessibility.screenReaderSection.beforeChartFormat, e = this.getAxesDescription(), i = a.sonify && (null === (n = a.options.sonification) || void 0 === n ? void 0 : n.enabled), n = "highcharts-a11y-sonify-data-btn-" + a.index, o = "hc-linkto-highcharts-data-table-" + a.index, r = d(a), s = a.langFormat("accessibility.screenReaderSection.annotations.heading", { chart: a }), e = { chartTitle: m(a), typeDescription: this.getTypeDescriptionText(), chartSubtitle: this.getSubtitleText(), chartLongdesc: this.getLongdescText(), xAxisDescription: e.xAxis, yAxisDescription: e.yAxis, playAsSoundButton: i ? this.getSonifyButtonText(n) : "", viewTableButton: a.getCSV ? this.getDataTableButtonText(o) : "", annotationsTitle: r ? s : "", annotationsList: r }, a = c.i18nFormat(t, e, a); return this.dataTableButtonId = o, this.sonifyButtonId = n, l(y(a)).replace(/<(\w+)[^>]*?>\s*<\/\1>/g, "") }, defaultAfterChartFormatter: function () { var t = (i = this.chart).options.accessibility.screenReaderSection.afterChartFormat, e = { endOfChartMarker: this.getEndOfChartMarkerText() }, i = c.i18nFormat(t, e, i); return l(y(i)).replace(/<(\w+)[^>]*?>\s*<\/\1>/g, "") }, getLinkedDescription: function () { var t = this.linkedDescriptionElement; return v(t && t.innerHTML || "") }, getLongdescText: function () { var t = this.chart.options, e = (e = t.caption) && e.text, i = this.getLinkedDescription(); return t.accessibility.description || i || e || "" }, getTypeDescriptionText: function () { var t = this.chart; return t.types ? t.options.accessibility.typeDescription || t.getTypeDescription(t.types) : "" }, getDataTableButtonText: function (t) { var e = this.chart; return '<button id="' + t + '">' + (e = e.langFormat("accessibility.table.viewAsDataTableButtonText", { chart: e, chartTitle: m(e) })) + "</button>" }, getSonifyButtonText: function (t) { var e, i = this.chart; return !1 === (null === (e = i.options.sonification) || void 0 === e ? void 0 : e.enabled) ? "" : '<button id="' + t + '">' + (e = i.langFormat("accessibility.sonification.playAsSoundButtonText", { chart: i, chartTitle: m(i) })) + "</button>" }, getSubtitleText: function () { var t = this.chart.options.subtitle; return v(t && t.text || "") }, getEndOfChartMarkerText: function () { var t = this.chart, e = t.langFormat("accessibility.screenReaderSection.endOfChartMarker", { chart: t }); return '<div id="highcharts-end-of-chart-marker-' + t.index + '">' + e + "</div>" }, onDataTableCreated: function (t) { var e = this.chart; e.options.accessibility.enabled && (this.viewDataTableButton && this.viewDataTableButton.setAttribute("aria-expanded", "true"), t.html = t.html.replace("<table ", '<table tabindex="-1" summary="' + e.langFormat("accessibility.table.tableSummary", { chart: e }) + '"')) }, focusDataTable: function () { var t = this.dataTableDiv; (t = t && t.getElementsByTagName("table")[0]) && t.focus && t.focus() }, initSonifyButton: function (t) { var i = this, n = this.sonifyButton = x(t), o = this.chart; n && o && (f(n, { tabindex: "-1" }), n.onclick = function (t) { var e; ((null === (e = o.options.accessibility) || void 0 === e ? void 0 : e.screenReaderSection.onPlayAsSoundClick) || function (t) { null != n && n.setAttribute("aria-hidden", "true"), null != n && n.setAttribute("aria-label", ""), t.preventDefault(), t.stopPropagation(), t = o.langFormat("accessibility.sonification.playAsSoundClickAnnouncement", { chart: o }), i.announcer.announce(t), setTimeout(function () { null != n && n.removeAttribute("aria-hidden"), null != n && n.removeAttribute("aria-label"), o.sonify && o.sonify() }, 1e3) }).call(this, t, o) }) }, initDataTableButton: function (t) { var e = this.viewDataTableButton = x(t), i = this.chart; t = t.replace("hc-linkto-", ""), e && (f(e, { tabindex: "-1", "aria-expanded": !!x(t) }), e.onclick = i.options.accessibility.screenReaderSection.onViewDataTableClick || function () { i.viewData() }) }, getAxesDescription: function () { var i = this.chart, t = function (t, e) { return 1 < (t = i[t]).length || t[0] && h(t[0].options.accessibility && t[0].options.accessibility.enabled, e) }, e = !!i.types && i.types.indexOf("map") < 0, n = !!i.hasCartesianSeries, o = t("xAxis", !i.angular && n && e), t = t("yAxis", n && e), e = {}; return o && (e.xAxis = this.getAxisDescriptionText("xAxis")), t && (e.yAxis = this.getAxisDescriptionText("yAxis")), e }, getAxisDescriptionText: function (t) { var e = this, i = this.chart, n = i[t]; return i.langFormat("accessibility.axis." + t + "Description" + (1 < n.length ? "Plural" : "Singular"), { chart: i, names: n.map(function (t) { return g(t) }), ranges: n.map(function (t) { return e.getAxisRangeDescription(t) }), numAxes: n.length }) }, getAxisRangeDescription: function (t) { var e = t.options || {}; return e.accessibility && void 0 !== e.accessibility.rangeDescription ? e.accessibility.rangeDescription : t.categories ? this.getCategoryAxisRangeDesc(t) : !t.dateTime || 0 !== t.min && 0 !== t.dataMin ? this.getAxisFromToDescription(t) : this.getAxisTimeLengthDesc(t) }, getCategoryAxisRangeDesc: function (t) { var e = this.chart; return t.dataMax && t.dataMin ? e.langFormat("accessibility.axis.rangeCategories", { chart: e, axis: t, numCategories: t.dataMax - t.dataMin + 1 }) : "" }, getAxisTimeLengthDesc: function (t) { var e = this.chart, i = {}, n = "Seconds"; i.Seconds = ((t.max || 0) - (t.min || 0)) / 1e3, i.Minutes = i.Seconds / 60, i.Hours = i.Minutes / 60, i.Days = i.Hours / 24, ["Minutes", "Hours", "Days"].forEach(function (t) { 2 < i[t] && (n = t) }); var o = i[n].toFixed("Seconds" !== n && "Minutes" !== n ? 1 : 0); return e.langFormat("accessibility.axis.timeRange" + n, { chart: e, axis: t, range: o.replace(".0", "") }) }, getAxisFromToDescription: function (e) { function t(t) { return e.dateTime ? i.time.dateFormat(n, e[t]) : e[t] } var i = this.chart, n = i.options.accessibility.screenReaderSection.axisRangeDateFormat; return i.langFormat("accessibility.axis.rangeFromTo", { chart: i, axis: e, rangeFrom: t("min"), rangeTo: t("max") }) }, destroy: function () { var t; null !== (t = this.announcer) && void 0 !== t && t.destroy() } }), t }), e(t, "Accessibility/Components/ContainerComponent.js", [t["Core/Globals.js"], t["Core/Utilities.js"], t["Accessibility/Utils/HTMLUtilities.js"], t["Accessibility/Utils/ChartUtilities.js"], t["Accessibility/AccessibilityComponent.js"]], function (t, e, i, n, o) { var r = t.win.document; t = e.extend; var s = i.stripHTMLTagsFromString, a = n.unhideChartElementFromAT, c = n.getChartTitle; return (i = function () { }).prototype = new o, t(i.prototype, { onChartUpdate: function () { this.handleSVGTitleElement(), this.setSVGContainerLabel(), this.setGraphicContainerAttrs(), this.setRenderToAttrs(), this.makeCreditsAccessible() }, handleSVGTitleElement: function () { var t, e = this.chart, i = "highcharts-title-" + e.index, n = s(e.langFormat("accessibility.svgContainerTitle", { chartTitle: c(e) })); n.length && ((t = this.svgTitleElement = this.svgTitleElement || r.createElementNS("http://www.w3.org/2000/svg", "title")).textContent = n, t.id = i, e.renderTo.insertBefore(t, e.renderTo.firstChild)) }, setSVGContainerLabel: function () { var t = this.chart, e = s(t.langFormat("accessibility.svgContainerLabel", { chartTitle: c(t) })); t.renderer.box && e.length && t.renderer.box.setAttribute("aria-label", e) }, setGraphicContainerAttrs: function () { var t = this.chart, e = t.langFormat("accessibility.graphicContainerLabel", { chartTitle: c(t) }); e.length && t.container.setAttribute("aria-label", e) }, setRenderToAttrs: function () { var t = this.chart; "disabled" !== t.options.accessibility.landmarkVerbosity ? t.renderTo.setAttribute("role", "region") : t.renderTo.removeAttribute("role"), t.renderTo.setAttribute("aria-label", t.langFormat("accessibility.chartContainerLabel", { title: c(t), chart: t })) }, makeCreditsAccessible: function () { var t = this.chart, e = t.credits; e && (e.textStr && e.element.setAttribute("aria-label", s(t.langFormat("accessibility.credits", { creditsStr: e.textStr }))), a(t, e.element)) }, destroy: function () { this.chart.renderTo.setAttribute("aria-hidden", !0) } }), i }), e(t, "Accessibility/HighContrastMode.js", [t["Core/Globals.js"]], function (t) { var i = t.isMS, n = t.win, o = n.document; return { isHighContrastModeActive: function () { var t = /(Edg)/.test(n.navigator.userAgent); if (n.matchMedia && t) return n.matchMedia("(-ms-high-contrast: active)").matches; if (i && n.getComputedStyle) { (t = o.createElement("div")).style.backgroundImage = "url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)", o.body.appendChild(t); var e = (t.currentStyle || n.getComputedStyle(t)).backgroundImage; return o.body.removeChild(t), "none" === e } return !1 }, setHighContrastTheme: function (t) { t.highContrastModeActive = !0; var i = t.options.accessibility.highContrastTheme; t.update(i, !1), t.series.forEach(function (t) { var e = i.plotOptions[t.type] || {}; t.update({ color: e.color || "windowText", colors: [e.color || "windowText"], borderColor: e.borderColor || "window" }), t.points.forEach(function (t) { t.options && t.options.color && t.update({ color: e.color || "windowText", borderColor: e.borderColor || "window" }, !1) }) }), t.redraw() } } }), e(t, "Accessibility/HighContrastTheme.js", [], function () { return { chart: { backgroundColor: "window" }, title: { style: { color: "windowText" } }, subtitle: { style: { color: "windowText" } }, colorAxis: { minColor: "windowText", maxColor: "windowText", stops: [] }, colors: ["windowText"], xAxis: { gridLineColor: "windowText", labels: { style: { color: "windowText" } }, lineColor: "windowText", minorGridLineColor: "windowText", tickColor: "windowText", title: { style: { color: "windowText" } } }, yAxis: { gridLineColor: "windowText", labels: { style: { color: "windowText" } }, lineColor: "windowText", minorGridLineColor: "windowText", tickColor: "windowText", title: { style: { color: "windowText" } } }, tooltip: { backgroundColor: "window", borderColor: "windowText", style: { color: "windowText" } }, plotOptions: { series: { lineColor: "windowText", fillColor: "window", borderColor: "windowText", edgeColor: "windowText", borderWidth: 1, dataLabels: { connectorColor: "windowText", color: "windowText", style: { color: "windowText", textOutline: "none" } }, marker: { lineColor: "windowText", fillColor: "windowText" } }, pie: { color: "window", colors: ["window"], borderColor: "windowText", borderWidth: 1 }, boxplot: { fillColor: "window" }, candlestick: { lineColor: "windowText", fillColor: "window" }, errorbar: { fillColor: "window" } }, legend: { backgroundColor: "window", itemStyle: { color: "windowText" }, itemHoverStyle: { color: "windowText" }, itemHiddenStyle: { color: "#555" }, title: { style: { color: "windowText" } } }, credits: { style: { color: "windowText" } }, labels: { style: { color: "windowText" } }, drilldown: { activeAxisLabelStyle: { color: "windowText" }, activeDataLabelStyle: { color: "windowText" } }, navigation: { buttonOptions: { symbolStroke: "windowText", theme: { fill: "window" } } }, rangeSelector: { buttonTheme: { fill: "window", stroke: "windowText", style: { color: "windowText" }, states: { hover: { fill: "window", stroke: "windowText", style: { color: "windowText" } }, select: { fill: "#444", stroke: "windowText", style: { color: "windowText" } } } }, inputBoxBorderColor: "windowText", inputStyle: { backgroundColor: "window", color: "windowText" }, labelStyle: { color: "windowText" } }, navigator: { handles: { backgroundColor: "window", borderColor: "windowText" }, outlineColor: "windowText", maskFill: "transparent", series: { color: "windowText", lineColor: "windowText" }, xAxis: { gridLineColor: "windowText" } }, scrollbar: { barBackgroundColor: "#444", barBorderColor: "windowText", buttonArrowColor: "windowText", buttonBackgroundColor: "window", buttonBorderColor: "windowText", rifleColor: "windowText", trackBackgroundColor: "window", trackBorderColor: "windowText" } } }), e(t, "Accessibility/Options/Options.js", [], function () { return { accessibility: { enabled: !0, screenReaderSection: { beforeChartFormat: "<h5>{chartTitle}</h5><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>", afterChartFormat: "{endOfChartMarker}", axisRangeDateFormat: "%Y-%m-%d %H:%M:%S" }, series: { describeSingleSeries: !1, pointDescriptionEnabledThreshold: 200 }, point: { valueDescriptionFormat: "{index}. {xDescription}{separator}{value}." }, landmarkVerbosity: "all", linkedDescription: '*[data-highcharts-chart="{index}"] + .highcharts-description', keyboardNavigation: { enabled: !0, focusBorder: { enabled: !0, hideBrowserFocusOutline: !0, style: { color: "#335cad", lineWidth: 2, borderRadius: 3 }, margin: 2 }, order: ["series", "zoom", "rangeSelector", "legend", "chartMenu"], wrapAround: !0, seriesNavigation: { skipNullPoints: !0, pointNavigationEnabledThreshold: !1 } }, announceNewData: { enabled: !1, minAnnounceInterval: 5e3, interruptUser: !1 } }, legend: { accessibility: { enabled: !0, keyboardNavigation: { enabled: !0 } } }, exporting: { accessibility: { enabled: !0 } } } }), e(t, "Accessibility/Options/LangOptions.js", [], function () { return { accessibility: { defaultChartTitle: "Chart", chartContainerLabel: "{title}. Highcharts interactive chart.", svgContainerLabel: "Interactive chart", drillUpButton: "{buttonText}", credits: "Chart credits: {creditsStr}", thousandsSep: ",", svgContainerTitle: "", graphicContainerLabel: "", screenReaderSection: { beforeRegionLabel: "Chart screen reader information.", afterRegionLabel: "", annotations: { heading: "Chart annotations summary", descriptionSinglePoint: "{annotationText}. Related to {annotationPoint}", descriptionMultiplePoints: "{annotationText}. Related to {annotationPoint}{ Also related to, #each(additionalAnnotationPoints)}", descriptionNoPoints: "{annotationText}" }, endOfChartMarker: "End of interactive chart." }, sonification: { playAsSoundButtonText: "Play as sound, {chartTitle}", playAsSoundClickAnnouncement: "Play" }, legend: { legendLabel: "Toggle series visibility", legendItem: "Hide {itemName}" }, zoom: { mapZoomIn: "Zoom chart", mapZoomOut: "Zoom out chart", resetZoomButton: "Reset zoom" }, rangeSelector: { minInputLabel: "Select start date.", maxInputLabel: "Select end date.", buttonText: "Select range {buttonText}" }, table: { viewAsDataTableButtonText: "View as data table, {chartTitle}", tableSummary: "Table representation of chart." }, announceNewData: { newDataAnnounce: "Updated data for chart {chartTitle}", newSeriesAnnounceSingle: "New data series: {seriesDesc}", newPointAnnounceSingle: "New data point: {pointDesc}", newSeriesAnnounceMultiple: "New data series in chart {chartTitle}: {seriesDesc}", newPointAnnounceMultiple: "New data point in chart {chartTitle}: {pointDesc}" }, seriesTypeDescriptions: { boxplot: "Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.", arearange: "Arearange charts are line charts displaying a range between a lower and higher value for each point.", areasplinerange: "These charts are line charts displaying a range between a lower and higher value for each point.", bubble: "Bubble charts are scatter charts where each data point also has a size value.", columnrange: "Columnrange charts are column charts displaying a range between a lower and higher value for each point.", errorbar: "Errorbar series are used to display the variability of the data.", funnel: "Funnel charts are used to display reduction of data in stages.", pyramid: "Pyramid charts consist of a single pyramid with item heights corresponding to each point value.", waterfall: "A waterfall chart is a column chart where each column contributes towards a total end value." }, chartTypes: { emptyChart: "Empty chart", mapTypeDescription: "Map of {mapTitle} with {numSeries} data series.", unknownMap: "Map of unspecified region with {numSeries} data series.", combinationChart: "Combination chart with {numSeries} data series.", defaultSingle: "Chart with {numPoints} data {#plural(numPoints, points, point)}.", defaultMultiple: "Chart with {numSeries} data series.", splineSingle: "Line chart with {numPoints} data {#plural(numPoints, points, point)}.", splineMultiple: "Line chart with {numSeries} lines.", lineSingle: "Line chart with {numPoints} data {#plural(numPoints, points, point)}.", lineMultiple: "Line chart with {numSeries} lines.", columnSingle: "Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.", columnMultiple: "Bar chart with {numSeries} data series.", barSingle: "Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.", barMultiple: "Bar chart with {numSeries} data series.", pieSingle: "Pie chart with {numPoints} {#plural(numPoints, slices, slice)}.", pieMultiple: "Pie chart with {numSeries} pies.", scatterSingle: "Scatter chart with {numPoints} {#plural(numPoints, points, point)}.", scatterMultiple: "Scatter chart with {numSeries} data series.", boxplotSingle: "Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.", boxplotMultiple: "Boxplot with {numSeries} data series.", bubbleSingle: "Bubble chart with {numPoints} {#plural(numPoints, bubbles, bubble)}.", bubbleMultiple: "Bubble chart with {numSeries} data series." }, axis: { xAxisDescriptionSingular: "The chart has 1 X axis displaying {names[0]}. {ranges[0]}", xAxisDescriptionPlural: "The chart has {numAxes} X axes displaying {#each(names, -1) }and {names[-1]}.", yAxisDescriptionSingular: "The chart has 1 Y axis displaying {names[0]}. {ranges[0]}", yAxisDescriptionPlural: "The chart has {numAxes} Y axes displaying {#each(names, -1) }and {names[-1]}.", timeRangeDays: "Range: {range} days.", timeRangeHours: "Range: {range} hours.", timeRangeMinutes: "Range: {range} minutes.", timeRangeSeconds: "Range: {range} seconds.", rangeFromTo: "Range: {rangeFrom} to {rangeTo}.", rangeCategories: "Range: {numCategories} categories." }, exporting: { chartMenuLabel: "Chart menu", menuButtonLabel: "View chart menu", exportRegionLabel: "Chart menu" }, series: { summary: { default: "{name}, series {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.", defaultCombination: "{name}, series {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.", line: "{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.", lineCombination: "{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.", spline: "{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.", splineCombination: "{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.", column: "{name}, bar series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bars, bar)}.", columnCombination: "{name}, series {ix} of {numSeries}. Bar series with {numPoints} {#plural(numPoints, bars, bar)}.", bar: "{name}, bar series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bars, bar)}.", barCombination: "{name}, series {ix} of {numSeries}. Bar series with {numPoints} {#plural(numPoints, bars, bar)}.", pie: "{name}, pie {ix} of {numSeries} with {numPoints} {#plural(numPoints, slices, slice)}.", pieCombination: "{name}, series {ix} of {numSeries}. Pie with {numPoints} {#plural(numPoints, slices, slice)}.", scatter: "{name}, scatter plot {ix} of {numSeries} with {numPoints} {#plural(numPoints, points, point)}.", scatterCombination: "{name}, series {ix} of {numSeries}, scatter plot with {numPoints} {#plural(numPoints, points, point)}.", boxplot: "{name}, boxplot {ix} of {numSeries} with {numPoints} {#plural(numPoints, boxes, box)}.", boxplotCombination: "{name}, series {ix} of {numSeries}. Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.", bubble: "{name}, bubble series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bubbles, bubble)}.", bubbleCombination: "{name}, series {ix} of {numSeries}. Bubble series with {numPoints} {#plural(numPoints, bubbles, bubble)}.", map: "{name}, map {ix} of {numSeries} with {numPoints} {#plural(numPoints, areas, area)}.", mapCombination: "{name}, series {ix} of {numSeries}. Map with {numPoints} {#plural(numPoints, areas, area)}.", mapline: "{name}, line {ix} of {numSeries} with {numPoints} data {#plural(numPoints, points, point)}.", maplineCombination: "{name}, series {ix} of {numSeries}. Line with {numPoints} data {#plural(numPoints, points, point)}.", mapbubble: "{name}, bubble series {ix} of {numSeries} with {numPoints} {#plural(numPoints, bubbles, bubble)}.", mapbubbleCombination: "{name}, series {ix} of {numSeries}. Bubble series with {numPoints} {#plural(numPoints, bubbles, bubble)}." }, description: "{description}", xAxisDescription: "X axis, {name}", yAxisDescription: "Y axis, {name}", nullPointValue: "No value", pointAnnotationsDescription: "{Annotation: #each(annotations). }" } } } }), e(t, "Accessibility/Options/DeprecatedOptions.js", [t["Core/Utilities.js"]], function (t) { function l(t, e, i) { for (var n, o = 0; o < e.length - 1; ++o)t = t[n = e[o]] = r(t[n], {}); t[e[e.length - 1]] = i } function a(n, o, r, s) { function t(t, e) { return e.reduce(function (t, e) { return t[e] }, t) } var a = t(n.options, o), c = t(n.options, r); Object.keys(s).forEach(function (t) { var e, i = a[t]; void 0 !== i && (l(c, s[t], i), u(32, !1, n, ((e = {})[o.join(".") + "." + t] = r.join(".") + "." + s[t].join("."), e))) }) } var u = t.error, r = t.pick; return function (t) { var i, n, o, e, r, s; n = (i = t).options.chart || {}, o = i.options.accessibility || {}, ["description", "typeDescription"].forEach(function (t) { var e; n[t] && (o[t] = n[t], u(32, !1, i, ((e = {})["chart." + t] = "use accessibility." + t, e))) }), (e = t).axes.forEach(function (t) { (t = t.options) && t.description && (t.accessibility = t.accessibility || {}, t.accessibility.description = t.description, u(32, !1, e, { "axis.description": "use axis.accessibility.description" })) }), t.series && (s = { description: ["accessibility", "description"], exposeElementToA11y: ["accessibility", "exposeAsGroupOnly"], pointDescriptionFormatter: ["accessibility", "pointDescriptionFormatter"], skipKeyboardNavigation: ["accessibility", "keyboardNavigation", "enabled"] }, (r = t).series.forEach(function (n) { Object.keys(s).forEach(function (t) { var e, i = n.options[t]; void 0 !== i && (l(n.options, s[t], "skipKeyboardNavigation" === t ? !i : i), u(32, !1, r, ((e = {})["series." + t] = "series." + s[t].join("."), e))) }) })), a(t, ["accessibility"], ["accessibility"], { pointDateFormat: ["point", "dateFormat"], pointDateFormatter: ["point", "dateFormatter"], pointDescriptionFormatter: ["point", "descriptionFormatter"], pointDescriptionThreshold: ["series", "pointDescriptionEnabledThreshold"], pointNavigationThreshold: ["keyboardNavigation", "seriesNavigation", "pointNavigationEnabledThreshold"], pointValueDecimals: ["point", "valueDecimals"], pointValuePrefix: ["point", "valuePrefix"], pointValueSuffix: ["point", "valueSuffix"], screenReaderSectionFormatter: ["screenReaderSection", "beforeChartFormatter"], describeSingleSeries: ["series", "describeSingleSeries"], seriesDescriptionFormatter: ["series", "descriptionFormatter"], onTableAnchorClick: ["screenReaderSection", "onViewDataTableClick"], axisRangeDateFormat: ["screenReaderSection", "axisRangeDateFormat"] }), a(t, ["accessibility", "keyboardNavigation"], ["accessibility", "keyboardNavigation", "seriesNavigation"], { skipNullPoints: ["skipNullPoints"], mode: ["mode"] }), a(t, ["lang", "accessibility"], ["lang", "accessibility"], { legendItem: ["legend", "legendItem"], legendLabel: ["legend", "legendLabel"], mapZoomIn: ["zoom", "mapZoomIn"], mapZoomOut: ["zoom", "mapZoomOut"], resetZoomButton: ["zoom", "resetZoomButton"], screenReaderRegionLabel: ["screenReaderSection", "beforeRegionLabel"], rangeSelectorButton: ["rangeSelector", "buttonText"], rangeSelectorMaxInput: ["rangeSelector", "maxInputLabel"], rangeSelectorMinInput: ["rangeSelector", "minInputLabel"], svgContainerEnd: ["screenReaderSection", "endOfChartMarker"], viewAsDataTable: ["table", "viewAsDataTableButtonText"], tableSummary: ["table", "tableSummary"] }) } }), e(t, "Accessibility/A11yI18n.js", [t["Core/Globals.js"], t["Core/Utilities.js"]], function (o, t) { var c = t.format, l = t.pick; o.i18nFormat = function (t, e, i) { function n(t, e) { var i = (t = t.slice(e || 0)).indexOf("{"), n = t.indexOf("}"); if (-1 < i && i < n) return { statement: t.substring(i + 1, n), begin: e + i + 1, end: e + n } } var o = [], r = 0; do { var s = n(t, r), a = t.substring(r, s && s.begin - 1); a.length && o.push({ value: a, type: "constant" }), s && o.push({ value: s.statement, type: "statement" }), r = s ? s.end + 1 : r + 1 } while (s); return o.forEach(function (t) { "statement" === t.type && (t.value = function (t, e) { var i = t.indexOf("#each("), n = t.indexOf("#plural("), o = t.indexOf("["), r = t.indexOf("]"); if (-1 < i) { o = t.slice(i).indexOf(")") + i; var s = t.substring(0, i), n = t.substring(o + 1), o = t.substring(i + 6, o).split(","), i = Number(o[1]); if (t = "", e = e[o[0]]) for (i = (i = isNaN(i) ? e.length : i) < 0 ? e.length + i : Math.min(i, e.length), o = 0; o < i; ++o)t += s + e[o] + n; return t.length ? t : "" } if (-1 < n) { switch (s = t.slice(n).indexOf(")") + n, t = t.substring(n + 8, s).split(","), Number(e[t[0]])) { case 0: t = l(t[4], t[1]); break; case 1: t = l(t[2], t[1]); break; case 2: t = l(t[3], t[1]); break; default: t = t[1] }return e = t ? (e = t).trim && e.trim() || e.replace(/^\s+|\s+$/g, "") : "" } return -1 < o ? (n = t.substring(0, o), t = Number(t.substring(o + 1, r)), e = e[n], !isNaN(t) && e && (t < 0 ? void 0 === (s = e[e.length + t]) && (s = e[0]) : void 0 === (s = e[t]) && (s = e[e.length - 1])), void 0 !== s ? s : "") : "{" + t + "}" }(t.value, e)) }), c(o.reduce(function (t, e) { return t + e.value }, ""), e, i) }, o.Chart.prototype.langFormat = function (t, e) { t = t.split("."); for (var i = this.options.lang, n = 0; n < t.length; ++n)i = i && i[t[n]]; return "string" == typeof i ? o.i18nFormat(i, e, this) : "" } }), e(t, "Accessibility/FocusBorder.js", [t["Core/Globals.js"], t["Core/Renderer/SVG/SVGElement.js"], t["Core/Renderer/SVG/SVGLabel.js"], t["Core/Utilities.js"]], function (p, t, m, e) { var n = e.addEvent, i = e.extend, g = e.pick, b = "x y transform width height r d stroke-width".split(" "); i(t.prototype, { addFocusBorder: function (t, e) { this.focusBorder && this.removeFocusBorder(); var i = this.getBBox(), n = g(t, 3); i.x += this.translateX ? this.translateX : 0, i.y += this.translateY ? this.translateY : 0; var o, r, s, a, c = i.x - n, l = i.y - n, u = i.width + 2 * n, h = i.height + 2 * n, d = this instanceof m; "text" !== this.element.nodeName && !d || (o = !!this.rotation, r = d ? { x: o ? 1 : 0, y: 0 } : (c = r = 0, "middle" === this.attr("text-anchor") ? (r = p.isFirefox && this.rotation ? .25 : .5, c = p.isFirefox && !this.rotation ? .75 : .5) : this.rotation ? r = .25 : c = .75, { x: r, y: c }), c = this.attr("x") - i.width * r.x - n, l = this.attr("y") - i.height * r.y - n, d && o && (d = u, u = h, h = d, c = this.attr("x") - i.height * r.x - n, l = this.attr("y") - i.width * r.y - n)), this.focusBorder = this.renderer.rect(c, l, u, h, parseInt((e && e.borderRadius || 0).toString(), 10)).addClass("highcharts-focus-border").attr({ zIndex: 99 }).add(this.parentGroup), this.renderer.styledMode || this.focusBorder.attr({ stroke: e && e.stroke, "stroke-width": e && e.strokeWidth }), function (i) { for (var n = [], t = 1; t < arguments.length; t++)n[t - 1] = arguments[t]; i.focusBorderUpdateHooks || (i.focusBorderUpdateHooks = {}, b.forEach(function (t) { var e = i[t += "Setter"] || i._defaultSetter; i.focusBorderUpdateHooks[t] = e, i[t] = function () { var t = e.apply(i, arguments); return i.addFocusBorder.apply(i, n), t } })) }(this, t, e), (s = this).focusBorderDestroyHook || (a = s.destroy, s.destroy = function () { var t, e; return null !== (e = null === (t = s.focusBorder) || void 0 === t ? void 0 : t.destroy) && void 0 !== e && e.call(t), a.apply(s, arguments) }, s.focusBorderDestroyHook = a) }, removeFocusBorder: function () { var i; (i = this).focusBorderUpdateHooks && (Object.keys(i.focusBorderUpdateHooks).forEach(function (t) { var e = i.focusBorderUpdateHooks[t]; e === i._defaultSetter ? delete i[t] : i[t] = e }), delete i.focusBorderUpdateHooks), this.focusBorderDestroyHook && (this.destroy = this.focusBorderDestroyHook, delete this.focusBorderDestroyHook), this.focusBorder && (this.focusBorder.destroy(), delete this.focusBorder) } }), p.Chart.prototype.renderFocusBorder = function () { var t = this.focusElement, e = this.options.accessibility.keyboardNavigation.focusBorder; t && (t.removeFocusBorder(), e.enabled && t.addFocusBorder(e.margin, { stroke: e.style.color, strokeWidth: e.style.lineWidth, borderRadius: e.style.borderRadius })) }, p.Chart.prototype.setFocusToElement = function (t, e) { var i = this.options.accessibility.keyboardNavigation.focusBorder; (e = e || t.element) && e.focus && (e.hcEvents && e.hcEvents.focusin || n(e, "focusin", function () { }), e.focus(), i.hideBrowserFocusOutline && (e.style.outline = "none")), this.focusElement && this.focusElement.removeFocusBorder(), this.focusElement = t, this.renderFocusBorder() } }), e(t, "Accessibility/Accessibility.js", [t["Accessibility/Utils/ChartUtilities.js"], t["Core/Globals.js"], t["Accessibility/KeyboardNavigationHandler.js"], t["Core/Options.js"], t["Core/Series/Point.js"], t["Core/Utilities.js"], t["Accessibility/AccessibilityComponent.js"], t["Accessibility/KeyboardNavigation.js"], t["Accessibility/Components/LegendComponent.js"], t["Accessibility/Components/MenuComponent.js"], t["Accessibility/Components/SeriesComponent/SeriesComponent.js"], t["Accessibility/Components/ZoomComponent.js"], t["Accessibility/Components/RangeSelectorComponent.js"], t["Accessibility/Components/InfoRegionsComponent.js"], t["Accessibility/Components/ContainerComponent.js"], t["Accessibility/HighContrastMode.js"], t["Accessibility/HighContrastTheme.js"], t["Accessibility/Options/Options.js"], t["Accessibility/Options/LangOptions.js"], t["Accessibility/Options/DeprecatedOptions.js"]], function (t, e, i, n, o, r, s, a, c, l, u, h, d, p, m, g, b, f, y, v) { function x(t) { this.init(t) } var A = r.addEvent, C = r.extend, w = r.fireEvent, T = r.merge, E = e.win.document; T(!0, n.defaultOptions, f, { accessibility: { highContrastTheme: b }, lang: y }), e.A11yChartUtilities = t, e.KeyboardNavigationHandler = i, e.AccessibilityComponent = s, x.prototype = { init: function (t) { this.chart = t, E.addEventListener && t.renderer.isSVG ? (v(t), this.initComponents(), this.keyboardNavigation = new a(t, this.components), this.update()) : t.renderTo.setAttribute("aria-hidden", !0) }, initComponents: function () { var e = this.chart, t = e.options.accessibility; this.components = { container: new m, infoRegions: new p, legend: new c, chartMenu: new l, rangeSelector: new d, series: new u, zoom: new h }, t.customComponents && C(this.components, t.customComponents); var i = this.components; this.getComponentOrder().forEach(function (t) { i[t].initBase(e), i[t].init() }) }, getComponentOrder: function () { if (!this.components) return []; if (!this.components.series) return Object.keys(this.components); var t = Object.keys(this.components).filter(function (t) { return "series" !== t }); return ["series"].concat(t) }, update: function () { var e = this.components, i = this.chart, t = i.options.accessibility; w(i, "beforeA11yUpdate"), i.types = this.getChartTypes(), this.getComponentOrder().forEach(function (t) { e[t].onChartUpdate(), w(i, "afterA11yComponentUpdate", { name: t, component: e[t] }) }), this.keyboardNavigation.update(t.keyboardNavigation.order), !i.highContrastModeActive && g.isHighContrastModeActive() && g.setHighContrastTheme(i), w(i, "afterA11yUpdate", { accessibility: this }) }, destroy: function () { var t = this.chart || {}, e = this.components; Object.keys(e).forEach(function (t) { e[t].destroy(), e[t].destroyBase() }), this.keyboardNavigation && this.keyboardNavigation.destroy(), t.renderTo && t.renderTo.setAttribute("aria-hidden", !0), t.focusElement && t.focusElement.removeFocusBorder() }, getChartTypes: function () { var e = {}; return this.chart.series.forEach(function (t) { e[t.type] = 1 }), Object.keys(e) } }, e.Chart.prototype.updateA11yEnabled = function () { var t = this.accessibility, e = this.options.accessibility; e && e.enabled ? t ? t.update() : this.accessibility = new x(this) : t ? (t.destroy && t.destroy(), delete this.accessibility) : this.renderTo.setAttribute("aria-hidden", !0) }, A(e.Chart, "render", function (t) { this.a11yDirty && this.renderTo && (delete this.a11yDirty, this.updateA11yEnabled()); var e = this.accessibility; e && e.getComponentOrder().forEach(function (t) { e.components[t].onChartRender() }) }), A(e.Chart, "update", function (t) { (t = t.options.accessibility) && (t.customComponents && (this.options.accessibility.customComponents = t.customComponents, delete t.customComponents), T(!0, this.options.accessibility, t), this.accessibility && this.accessibility.destroy && (this.accessibility.destroy(), delete this.accessibility)), this.a11yDirty = !0 }), A(o, "update", function () { this.series.chart.accessibility && (this.series.chart.a11yDirty = !0) }), ["addSeries", "init"].forEach(function (t) { A(e.Chart, t, function () { this.a11yDirty = !0 }) }), ["update", "updatedData", "remove"].forEach(function (t) { A(e.Series, t, function () { this.chart.accessibility && (this.chart.a11yDirty = !0) }) }), ["afterDrilldown", "drillupall"].forEach(function (t) { A(e.Chart, t, function () { this.accessibility && this.accessibility.update() }) }), A(e.Chart, "destroy", function () { this.accessibility && this.accessibility.destroy() }) }), e(t, "masters/modules/accessibility.src.js", [], function () { }) });